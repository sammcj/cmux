{"id":"cmux-03i","title":"Handle 'too many open files' error when user opens too many sandboxes","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T21:37:29.675991-08:00","updated_at":"2025-12-29T18:41:31.115278-08:00","closed_at":"2025-12-29T18:41:31.115278-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-08d","title":"Implement Bitbucket provider adapter","description":"Implement Bitbucket support using the GitProvider abstraction.\n\n## Files to Create\n- packages/shared/src/git-providers/bitbucket/index.ts\n- packages/shared/src/git-providers/bitbucket/types.ts\n\n## Implementation\n- Use Bitbucket Cloud REST API 2.0\n- Implement GitProvider interface\n- Map Bitbucket concepts to normalized types:\n  - Pull Request → PullRequest (same name)\n  - Repository → Repository\n  - Comments → Comments\n\n## Bitbucket-Specific Considerations\n- Bitbucket Apps (OAuth consumers)\n- Workspace vs Repository permissions\n- Bitbucket Pipelines integration\n- Self-hosted Bitbucket Server/Data Center (different API)\n\n## API Client\n- Custom fetch-based client\n- OAuth 2.0 with refresh tokens","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:55:33.788951-08:00","updated_at":"2025-12-29T19:02:03.409429-08:00","closed_at":"2025-12-29T19:02:03.409429-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"]}
{"id":"cmux-1af","title":"Implement cmux prune command for interactive cleanup of unused sandboxes","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:30.679424-08:00","updated_at":"2025-12-05T23:09:14.392499-08:00","closed_at":"2025-12-05T23:09:14.392499-08:00","labels":["sandbox"]}
{"id":"cmux-1fx","title":"Terminal shows stray # artifacts before prompts","description":"## Problem\nTerminal shows stray `#` characters appearing on their own lines before the actual shell prompt:\n```\n#\nroot@sandbox-15:/workspace (main)#\n#\nroot@sandbox-15:/workspace (main)#\n```\n\n## Hypotheses\n\n1. **Shell prompt carriage return issue**: The shell writes `#` first, then uses `\\r` to overwrite with full prompt, but our terminal isn't clearing the line properly on `\\r`\n\n2. **Terminal resize timing**: When terminal connects, resize signal causes shell to redraw prompt before size is properly set, leaving partial renders\n\n3. **vcs_info (git) in zsh prompt**: The `precmd() { vcs_info }` hook runs before each prompt. If it outputs anything or has timing issues with the async git status, could cause double renders\n\n4. **Line wrapping + resize**: Long prompt wrapping then getting redrawn at different width could leave the trailing `#` character as an artifact\n\n5. **Connection timing**: Terminal connects while shell is mid-prompt-output, causing partial characters to be captured\n\n## Relevant files\n- `src/mux/terminal.rs` - Virtual terminal emulator\n- `src/mux/grid.rs` - Grid resize handling\n- `src/bubblewrap.rs:419` - zsh PROMPT definition with vcs_info","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-03T18:37:04.803472-08:00","updated_at":"2025-12-29T18:41:31.112761-08:00","closed_at":"2025-12-29T18:41:31.112761-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-1yl","title":"Update code review system for multi-provider support","description":"Update AI code review system to work with GitLab and Bitbucket.\n\n## Current State\n- apps/www/lib/services/code-review/ - Code review services\n- apps/www/lib/routes/github.prs.code.route.ts - Code review endpoint\n- Uses GitHub API to fetch PR diff and files\n- Posts review comments to GitHub PRs\n\n## Components to Abstract\n\n### 1. Diff Fetching\n- Get PR/MR diff content\n- Get changed files list\n- Already covered by cmux2-xha (file content retrieval)\n\n### 2. Review Comment Posting\n```typescript\ninterface CodeReviewProvider {\n  // Create review with comments\n  createReview(repo: string, prNumber: number, review: ReviewInput): Promise\u003cReview\u003e\n  \n  // Single comment on specific line\n  createLineComment(repo: string, prNumber: number, comment: LineComment): Promise\u003cComment\u003e\n  \n  // Reply to existing comment\n  replyToComment(repo: string, commentId: string, body: string): Promise\u003cComment\u003e\n  \n  // List existing reviews/comments\n  listReviews(repo: string, prNumber: number): Promise\u003cReview[]\u003e\n}\n```\n\n## Provider Differences\n| Feature | GitHub | GitLab | Bitbucket |\n|---------|--------|--------|-----------|\n| Reviews | Pull Request Reviews | MR Approvals | PR Approvals |\n| Line comments | Review comments | Discussion notes | Inline comments |\n| Suggestions | Suggestion blocks | Suggestion syntax | Not supported |\n| Approval status | APPROVE/REQUEST_CHANGES | approve/unapprove | approve |\n\n## Files to Modify\n- apps/www/lib/services/code-review/*.ts\n- apps/www/lib/routes/github.prs.code.route.ts\n\n## Considerations\n- Review UX may differ by provider\n- Suggestion syntax varies\n- Approval workflows differ","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:13:59.215428-08:00","updated_at":"2025-12-29T19:02:03.388961-08:00","closed_at":"2025-12-29T19:02:03.388961-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-1yl","depends_on_id":"cmux-xha","type":"blocks","created_at":"2025-12-02T23:14:05.551574-08:00","created_by":"daemon"},{"issue_id":"cmux-1yl","depends_on_id":"cmux-jiw","type":"blocks","created_at":"2025-12-02T23:14:05.590776-08:00","created_by":"daemon"}]}
{"id":"cmux-241","title":"Integrate video gallery with existing screenshot gallery","description":"Update RunScreenshotGallery to display both screenshots and video recordings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T18:13:43.482736-08:00","updated_at":"2025-12-29T18:45:17.770237-08:00","closed_at":"2025-12-29T18:45:17.770237-08:00","close_reason":"Integrated RunVideoGallery into TaskRunGitDiffPanel: added videoRecordings to getRunDiffContext query, imported and rendered RunVideoGallery alongside RunScreenshotGallery","labels":["austin"]}
{"id":"cmux-282","title":"Add integration tests for git providers","description":"Create comprehensive tests for the git provider abstraction.\n\n## Test Categories\n\n### Unit Tests\n- Provider interface implementation tests\n- Webhook payload normalization tests\n- Auth token generation tests\n\n### Integration Tests\n- GitHub API mock tests\n- GitLab API mock tests  \n- Bitbucket API mock tests\n\n### E2E Tests\n- OAuth flow tests (per provider)\n- Webhook delivery tests\n- PR operations tests\n\n## Test Files to Create\n- packages/shared/src/git-providers/__tests__/github.test.ts\n- packages/shared/src/git-providers/__tests__/gitlab.test.ts\n- packages/shared/src/git-providers/__tests__/bitbucket.test.ts\n- packages/shared/src/git-providers/__tests__/webhook-normalization.test.ts\n- packages/convex/convex/__tests__/webhook.test.ts\n\n## Test Data\n- Sample webhook payloads for each provider\n- Mock API responses\n- Test fixtures for normalized types\n\n## Considerations\n- Use vitest per project conventions\n- No mocking per project rules - use real API calls where possible\n- Test files next to implementation files","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:58:03.044863-08:00","updated_at":"2025-12-29T19:02:03.399398-08:00","closed_at":"2025-12-29T19:02:03.399398-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-282","depends_on_id":"cmux-lv3","type":"blocks","created_at":"2025-12-02T22:58:08.475058-08:00","created_by":"daemon"}]}
{"id":"cmux-2dh","title":"Preinstall mise in sandbox","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T22:29:12.635166-08:00","updated_at":"2025-12-29T18:41:31.105985-08:00","closed_at":"2025-12-29T18:41:31.105985-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-2i4","title":"Add Bitbucket App setup and OAuth flow","description":"Create Bitbucket OAuth Consumer and implement integration.\n\n## Bitbucket App Setup\n1. Create OAuth consumer at bitbucket.org/[workspace]/workspace/settings/oauth-consumers\n2. Configure permissions: repository, pullrequest, webhook\n3. Set callback URL to /auth/callback/bitbucket\n\n## Implementation\n\n### OAuth Routes\n- GET /auth/bitbucket/authorize - Redirect to Bitbucket OAuth\n- GET /auth/callback/bitbucket - Handle OAuth callback\n\n### Stack Auth Integration\n- Add Bitbucket as OAuth provider in Stack Auth config\n- Store Bitbucket OAuth tokens with refresh token handling\n\n### Environment Variables\n```\nCMUX_BITBUCKET_APP_KEY=\nCMUX_BITBUCKET_APP_SECRET=\nBITBUCKET_WEBHOOK_SECRET=\n```\n\n### Files to Create\n- apps/www/lib/routes/bitbucket.oauth.route.ts\n- apps/www/lib/routes/bitbucket.setup.route.ts\n\n### Considerations\n- Workspace-level vs Repository-level access\n- Bitbucket Cloud vs Bitbucket Server (Data Center)\n- Token refresh flow (Bitbucket tokens expire)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:57:30.907592-08:00","updated_at":"2025-12-29T19:02:03.402296-08:00","closed_at":"2025-12-29T19:02:03.402296-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"]}
{"id":"cmux-2ry","title":"Port cmux-proxy - header-based HTTP/WS/TCP proxy","description":"Port the cmux-proxy crate from ../../crates/cmux-proxy to packages/sandbox.\n\n**Features to port:**\n- Header-based routing using X-Cmux-Host-Override header\n- HTTP/1.1 and HTTP/2 support with auto-detection\n- WebSocket upgrade handling and bidirectional proxying\n- TCP CONNECT tunneling for arbitrary TCP connections\n- Connection pooling and keep-alive management\n- Multiple listen addresses support\n- Configurable default upstream host\n\n**Use cases:**\n- Route external requests to sandboxed services based on headers\n- Enable WebSocket connections to sandboxed apps\n- TCP tunneling for database connections, etc.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T18:58:08.348438-08:00","updated_at":"2025-12-29T18:41:31.110056-08:00","closed_at":"2025-12-29T18:41:31.110056-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-2s8","title":"Make zsh default shell and copy user's zshrc, plugins, and history into container","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:19.053185-08:00","updated_at":"2025-12-02T16:17:08.574616-08:00","closed_at":"2025-12-02T16:17:08.574616-08:00","labels":["sandbox"]}
{"id":"cmux-3os","title":"Document git provider abstraction","description":"Create developer documentation for the git provider abstraction.\n\n## Documentation Needed\n\n### Architecture Overview\n- Provider abstraction pattern explanation\n- How to add a new provider\n- Webhook handling flow\n\n### Setup Guides\n- GitHub App setup (existing, update)\n- GitLab App setup (new)\n- Bitbucket OAuth setup (new)\n\n### API Reference\n- GitProvider interface documentation\n- Normalized types documentation\n- Webhook event mapping table\n\n### Migration Guide\n- How to migrate existing GitHub-only code\n- Breaking changes list\n- Deprecation timeline\n\n## Files to Create (if requested)\n- docs/git-providers/architecture.md\n- docs/git-providers/adding-providers.md\n- docs/git-providers/webhook-events.md\n\n## Code Comments\n- Add JSDoc to all interfaces\n- Document provider-specific quirks\n- Note any missing features per provider","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:58:17.343312-08:00","updated_at":"2025-12-29T19:02:03.397854-08:00","closed_at":"2025-12-29T19:02:03.397854-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-3os","depends_on_id":"cmux-282","type":"blocks","created_at":"2025-12-02T22:58:22.383628-08:00","created_by":"daemon"}]}
{"id":"cmux-3tz","title":"Refactor virtual terminal using zellij strategy for performance and edge cases","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-02T15:28:34.279873-08:00","updated_at":"2025-12-29T18:41:31.132087-08:00","closed_at":"2025-12-29T18:41:31.132087-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-4iz","title":"Add video recording schema to Convex","description":"Add taskRunVideoRecordings table with fields for storageId, mimeType, duration, checkpoints array, and metadata","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T18:13:35.782025-08:00","updated_at":"2025-12-29T18:15:52.401443-08:00","closed_at":"2025-12-29T18:15:52.401443-08:00","close_reason":"Closed"}
{"id":"cmux-4o8","title":"Update crown worker for multi-provider PR creation","description":"Update crown worker to create PRs on GitLab and Bitbucket, not just GitHub.\n\n## Current State\napps/worker/src/crown/pullRequest.ts:\n- Uses `gh pr create` CLI command\n- Only handles GitHub PRs\n\napps/worker/src/crown/workflow.ts:\n- Hardcodes `https://github.com/${info.task.projectFullName}.git`\n\n## gh CLI Commands Used\n```bash\ngh pr create --base \"$PR_BASE\" --head \"$PR_HEAD\" --title \"$PR_TITLE\" --body-file \"$BODY_FILE\" --json url,number,state,isDraft\n```\n\n## Provider CLI Equivalents\n| Action | GitHub | GitLab | Bitbucket |\n|--------|--------|--------|-----------|\n| Create PR/MR | gh pr create | glab mr create | API only |\n| Get PR URL | --json url | --json web_url | API response |\n\n## Implementation Options\n\n### Option A: CLI per provider\n```typescript\nfunction createPrWithCli(provider: Provider, params: CreatePRParams) {\n  switch(provider) {\n    case 'github': return execGhPrCreate(params)\n    case 'gitlab': return execGlabMrCreate(params)\n    case 'bitbucket': return createBitbucketPrViaApi(params)\n  }\n}\n```\n\n### Option B: Use API abstraction (preferred)\n- Use the provider abstraction layer from cmux2-7f4\n- More consistent behavior across providers\n- No CLI dependency\n\n## Files to Modify\n- apps/worker/src/crown/pullRequest.ts\n- apps/worker/src/crown/workflow.ts\n\n## Dependencies\n- Requires cmux2-7f4 (PR operations abstraction)\n- Requires cmux2-c6k (URL parsing)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:31:35.715814-08:00","updated_at":"2025-12-29T19:02:03.38101-08:00","closed_at":"2025-12-29T19:02:03.38101-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-4o8","depends_on_id":"cmux-7f4","type":"blocks","created_at":"2025-12-02T23:31:40.649353-08:00","created_by":"daemon"},{"issue_id":"cmux-4o8","depends_on_id":"cmux-c6k","type":"blocks","created_at":"2025-12-02T23:31:40.69077-08:00","created_by":"daemon"}]}
{"id":"cmux-5dx","title":"Dogfooding: Add command palette action for merging feature branches","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:42.184904-08:00","updated_at":"2025-12-29T18:41:31.123515-08:00","closed_at":"2025-12-29T18:41:31.123515-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-5jp","title":"Fix Alt+Shift+X keybinding not triggering DeleteSandbox","description":"When pressing Alt+Shift+X, it just types instead of triggering the delete sandbox command. The keybinding is defined with KeyCode::Char('X') (uppercase) but macOS terminals may report shift+letter differently.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:46.268812-08:00","updated_at":"2025-12-09T01:53:22.143939-08:00","closed_at":"2025-12-02T17:48:54.829342-08:00","labels":["sandbox"]}
{"id":"cmux-5xq","title":"Support TUI pointer control in terminal (OSC22, xterm-style cursor sequences)","description":"","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-02T15:28:32.576193-08:00","updated_at":"2025-12-29T18:41:31.133707-08:00","closed_at":"2025-12-29T18:41:31.133707-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-69t","title":"Add e2e tests for dmux CLI commands","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T19:02:26.861297-08:00","updated_at":"2025-12-12T16:51:49.323608-08:00","closed_at":"2025-12-12T16:51:49.323608-08:00"}
{"id":"cmux-73d","title":"Add fake CLIs for editors (zed, cursor, code, windsurf) that trigger open editor via unix socket, alias to cmux-bridge","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T01:27:23.238274-08:00","updated_at":"2025-12-09T01:53:22.124218-08:00","closed_at":"2025-12-05T01:51:16.344611-08:00"}
{"id":"cmux-7dc","title":"Update preview system for multi-provider support","description":"Update the preview.new system to work with GitLab and Bitbucket.\n\n## Current State\n- preview.new domain serves screenshot preview functionality\n- packages/convex/convex/previewConfigs.ts - Stores repoProvider, repoInstallationId\n- packages/convex/convex/previewRuns.ts - Tracks PR previews\n- Triggered by GitHub webhook on PR events\n- Posts screenshots as PR comments\n\n## Already Provider-Aware\n- previewConfigs table has `repoProvider` field (defaults to 'github')\n- Can store different installationIds per provider\n\n## Updates Needed\n1. **Webhook Integration**\n   - Trigger preview runs from GitLab MR webhooks\n   - Trigger preview runs from Bitbucket PR webhooks\n\n2. **Screenshot Posting**\n   - Post to GitLab MR notes\n   - Post to Bitbucket PR comments\n\n3. **PR Info Extraction**\n   - Extract PR number, base/head SHA from each provider's format\n\n## Files to Modify\n- packages/convex/convex/previewConfigs.ts - Already has provider field\n- packages/convex/convex/previewRuns.ts - Update PR info extraction\n- packages/convex/convex/preview_jobs_worker.ts - Use provider abstraction\n\n## Considerations\n- Diff heatmap (0github.com) is GitHub-only feature\n- May need provider-specific diff viewer alternatives","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:12:56.436861-08:00","updated_at":"2025-12-29T19:02:03.393247-08:00","closed_at":"2025-12-29T19:02:03.393247-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-7dc","depends_on_id":"cmux-cyr","type":"blocks","created_at":"2025-12-02T23:13:03.697951-08:00","created_by":"daemon"},{"issue_id":"cmux-7dc","depends_on_id":"cmux-jiw","type":"blocks","created_at":"2025-12-02T23:13:03.792308-08:00","created_by":"daemon"}]}
{"id":"cmux-7f4","title":"Abstract PR operations (create/merge/close) for git providers","description":"Abstract PR lifecycle operations across providers.\n\n## Current State\n- apps/www/lib/routes/github.prs.open.route.ts - Create, merge, close PRs\n- apps/worker/src/crown/pullRequest.ts - Crown winner auto-PR (uses gh CLI)\n- Uses Octokit for GitHub API calls\n- GraphQL for marking PR ready for review\n\n## Operations to Abstract\n```typescript\ninterface PROperationsProvider {\n  // Create\n  createPullRequest(params: CreatePRParams): Promise\u003cPullRequest\u003e\n  \n  // Update state\n  markReadyForReview(repo: string, number: number): Promise\u003cvoid\u003e\n  closePullRequest(repo: string, number: number): Promise\u003cvoid\u003e\n  reopenPullRequest(repo: string, number: number): Promise\u003cvoid\u003e\n  \n  // Merge\n  mergePullRequest(repo: string, number: number, method: MergeMethod): Promise\u003cvoid\u003e\n  \n  // Query\n  getPullRequest(repo: string, number: number): Promise\u003cPullRequest\u003e\n  getPullRequestByBranch(repo: string, branch: string): Promise\u003cPullRequest | null\u003e\n  listPullRequests(repo: string, options?: ListOptions): Promise\u003cPullRequest[]\u003e\n}\n\ntype MergeMethod = 'merge' | 'squash' | 'rebase'\n```\n\n## Provider Differences\n| Feature | GitHub | GitLab | Bitbucket |\n|---------|--------|--------|-----------|\n| Draft PRs | Supported | Supported (WIP MRs) | Not supported |\n| Merge methods | merge/squash/rebase | merge/squash/rebase | merge/squash |\n| Ready for review | GraphQL mutation | Remove WIP prefix | N/A |\n| Auto-merge | Supported | Supported | Limited |\n\n## Files to Modify\n- apps/www/lib/routes/github.prs.open.route.ts → abstract\n- apps/worker/src/crown/pullRequest.ts → use provider abstraction instead of gh CLI\n\n## Considerations\n- Crown worker currently uses gh CLI - need to abstract or ensure CLI exists for other providers\n- GraphQL vs REST for certain operations\n- Draft PR support varies","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:12:38.436281-08:00","updated_at":"2025-12-29T19:02:03.394809-08:00","closed_at":"2025-12-29T19:02:03.394809-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-7f4","depends_on_id":"cmux-lv3","type":"blocks","created_at":"2025-12-02T23:12:43.927552-08:00","created_by":"daemon"}]}
{"id":"cmux-7pm","title":"Port cmux-xterm - web-based terminal multiplexer server","description":"Port the cmux-xterm crate from ../../crates/cmux-xterm to packages/sandbox.\n\n**Features to port:**\n- PTY spawning and management\n- WebSocket-based terminal sessions\n- Multiple tab support via REST API (create/list/delete tabs)\n- Session state management with creation order tracking\n- Static file serving for web UI\n- Configurable command and arguments per tab\n- Terminal resize support (cols/rows)\n\n**Use cases:**\n- Expose sandbox terminals via web interface\n- Allow multiple terminal tabs per sandbox\n- WebSocket-based terminal access from frontend","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T18:58:09.847175-08:00","updated_at":"2025-12-29T18:41:31.108731-08:00","closed_at":"2025-12-29T18:41:31.108731-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-7tg","title":"Update CLI ssh command for Morph tokens","description":"Update dmux ssh command to: 1) Call API to get access_token, 2) Run 'ssh {access_token}@ssh.cloud.morph.so'. Remove WebSocket tunnel code from CLI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:19:05.719493-08:00","updated_at":"2025-12-11T18:43:47.467849-08:00","closed_at":"2025-12-11T18:43:47.467849-08:00","dependencies":[{"issue_id":"cmux-7tg","depends_on_id":"cmux-i0z","type":"blocks","created_at":"2025-12-11T18:20:37.836482-08:00","created_by":"lawrencechen"},{"issue_id":"cmux-7tg","depends_on_id":"cmux-aq0","type":"blocks","created_at":"2025-12-11T18:21:01.440663-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-80o","title":"Add playback speed controls","description":"Implement 0.5x, 1x, 1.5x, 2x playback speed options in the video player","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T18:13:42.655039-08:00","updated_at":"2025-12-29T18:41:20.57396-08:00","closed_at":"2025-12-29T18:41:20.57396-08:00","close_reason":"Already implemented in VideoPlayer.tsx - includes playback speed controls (0.5x-2x) and YouTube-like chapter navigation with checkpoint markers on timeline","labels":["austin"]}
{"id":"cmux-80t","title":"Design git provider abstraction architecture","description":"Define the core interfaces and architecture for abstracting git providers (GitHub, GitLab, Bitbucket).\n\n## Key Decisions\n- Interface design patterns (strategy pattern, factory pattern)\n- Provider configuration structure\n- How to handle provider-specific features that don't exist in all providers\n- Webhook payload normalization strategy\n- Token/auth abstraction approach\n\n## Deliverables\n- Architecture document or code comments\n- Core TypeScript interfaces\n- Provider factory/registry pattern","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T22:54:46.891551-08:00","updated_at":"2025-12-09T01:53:22.140377-08:00","closed_at":"2025-12-03T00:50:33.780145-08:00"}
{"id":"cmux-80u","title":"Implement text highlighting and copy to clipboard in virtual terminal","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:23.487953-08:00","updated_at":"2025-12-29T18:41:31.128579-08:00","closed_at":"2025-12-29T18:41:31.128579-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-85x","title":"Add non-interactive ssh exec command (cmux ssh exec)","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T19:02:18.991927-08:00","updated_at":"2025-12-09T19:49:56.663951-08:00","closed_at":"2025-12-09T19:49:56.663951-08:00"}
{"id":"cmux-880","title":"Port VNC websockify proxy from Go to Rust","description":"Port the noVNC websockify proxy from scripts/vnc-proxy/main.go to packages/sandbox (Rust).\n\n**Current Go implementation features:**\n- WebSocket to TCP VNC bridge (websockify protocol)\n- Configurable listen address/port (default 0.0.0.0:39380)\n- Configurable VNC target host/port (default 127.0.0.1:5901)  \n- Configurable websocket path (default /websockify)\n- Static file serving for noVNC web UI\n- Dial timeout and idle timeout configuration\n- Security headers (X-Content-Type-Options, Referrer-Policy, CORP)\n- Request logging middleware\n- Subprotocol negotiation support\n\n**Environment variables:**\n- CMUX_VNC_PROXY_HOST/PORT - listen address\n- CMUX_VNC_TARGET_HOST/PORT - VNC backend\n- CMUX_VNC_WS_PATH - websocket endpoint path\n- CMUX_VNC_WEB_DIR - static files directory\n- CMUX_VNC_DIAL_TIMEOUT - backend connection timeout\n- CMUX_VNC_IDLE_TIMEOUT - connection idle timeout\n\n**Benefits of Rust port:**\n- Single binary distribution (no Go runtime needed)\n- Consistent with rest of sandbox tooling\n- Can be integrated directly into sandbox server if desired\n- Better resource efficiency","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T19:06:53.389311-08:00","updated_at":"2025-12-29T18:41:31.107428-08:00","closed_at":"2025-12-29T18:41:31.107428-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-8b1","title":"Abstract server-side API client (ghApi) for git providers","description":"Abstract the direct GitHub API client to support multiple providers.\n\n## Current State\napps/server/src/ghApi.ts - Direct GitHub API wrapper:\n- Hardcodes `https://api.github.com`\n- Uses GitHub-specific Accept header\n- Methods: getUser, getUserRepos, getUserOrgs, getOrgRepos, getRepoBranches\n\n## Provider API Endpoints\n| Provider | Base URL | Auth Header |\n|----------|----------|-------------|\n| GitHub | api.github.com | Bearer token |\n| GitLab | gitlab.com/api/v4 | PRIVATE-TOKEN or Bearer |\n| Bitbucket | api.bitbucket.org/2.0 | Bearer token |\n\n## API Mapping\n| Feature | GitHub | GitLab | Bitbucket |\n|---------|--------|--------|-----------|\n| Current user | /user | /user | /user |\n| User repos | /user/repos | /projects?membership=true | /repositories |\n| User orgs | /user/orgs | /groups | /workspaces |\n| Org repos | /orgs/:org/repos | /groups/:id/projects | /repositories/:workspace |\n| Branches | /repos/:repo/branches | /projects/:id/repository/branches | /repositories/:repo/refs/branches |\n\n## Implementation\n```typescript\n// apps/server/src/providerApi.ts\ninterface ProviderApiClient {\n  getUser(): Promise\u003c{ login: string }\u003e\n  getUserRepos(): Promise\u003cstring[]\u003e\n  getUserOrgs(): Promise\u003cstring[]\u003e\n  getOrgRepos(org: string): Promise\u003cstring[]\u003e\n  getRepoBranches(repo: string): Promise\u003cstring[]\u003e\n  getRepoBranchesWithActivity(repo: string): Promise\u003cBranchWithActivity[]\u003e\n}\n\nfunction createProviderApiClient(provider: Provider, token: string): ProviderApiClient\n```\n\n## Files to Modify\n- apps/server/src/ghApi.ts → rename to providerApi.ts\n- All files importing ghApi\n\n## Considerations\n- Different pagination styles (GitHub: Link header, GitLab: X-Page headers, Bitbucket: next URL)\n- Different rate limit handling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:31:59.018826-08:00","updated_at":"2025-12-29T19:02:03.379241-08:00","closed_at":"2025-12-29T19:02:03.379241-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-8b1","depends_on_id":"cmux-fy2","type":"blocks","created_at":"2025-12-02T23:32:05.751212-08:00","created_by":"daemon"},{"issue_id":"cmux-8b1","depends_on_id":"cmux-t6p","type":"blocks","created_at":"2025-12-02T23:32:05.79401-08:00","created_by":"daemon"}]}
{"id":"cmux-8r5","title":"Fix auth status: access token not sent to /users/me endpoint","description":"After successful login, cmux auth status fails with:\n```\nError: Failed to get user info: 400 Bad Request - {\n  \"code\": \"CANNOT_GET_OWN_USER_WITHOUT_USER\",\n  \"error\": \"You have specified 'me' as a userId, but did not provide authentication for a user.\"\n}\n```\n\nThe token refresh succeeds and returns an access_token, but the subsequent GET /api/v1/users/me request is not including the access token header correctly.\n\nNeed to add `x-stack-access-token` header (or Authorization: Bearer) to the user info request.\n\nLocation: packages/sandbox/src/bin/cli.rs in get_user_info()","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-09T14:04:19.31392-08:00","updated_at":"2025-12-09T14:05:38.226124-08:00","closed_at":"2025-12-09T14:05:38.226124-08:00"}
{"id":"cmux-90i","title":"Rebuild snapshot without ws-ssh-proxy","description":"Run snapshot.py to rebuild all presets without ws-ssh-proxy. Verify SSH works via Morph tokens.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:19:22.462966-08:00","updated_at":"2025-12-11T19:36:15.270172-08:00","closed_at":"2025-12-11T19:36:15.270172-08:00","dependencies":[{"issue_id":"cmux-90i","depends_on_id":"cmux-i0z","type":"blocks","created_at":"2025-12-11T18:20:43.08768-08:00","created_by":"lawrencechen"},{"issue_id":"cmux-90i","depends_on_id":"cmux-vjo","type":"blocks","created_at":"2025-12-11T18:20:49.680901-08:00","created_by":"lawrencechen"},{"issue_id":"cmux-90i","depends_on_id":"cmux-fee","type":"blocks","created_at":"2025-12-11T18:20:54.907373-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-9a2","title":"Instrument and optimize sandbox creation time (parallelize bottlenecks)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T15:28:40.510054-08:00","updated_at":"2025-12-29T18:41:31.125235-08:00","closed_at":"2025-12-29T18:41:31.125235-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-a97","title":"Support option+backspace (delete word) and cmd+backspace (delete to line start) in terminal","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:26.847678-08:00","updated_at":"2025-12-09T01:53:22.146338-08:00","closed_at":"2025-12-02T15:39:02.101918-08:00","labels":["sandbox"]}
{"id":"cmux-ab7","title":"Implement GitLab provider adapter","description":"Implement GitLab support using the GitProvider abstraction.\n\n## Files to Create\n- packages/shared/src/git-providers/gitlab/index.ts\n- packages/shared/src/git-providers/gitlab/types.ts\n\n## Implementation\n- Use GitLab REST API v4 or GraphQL API\n- Implement GitProvider interface\n- Map GitLab concepts to normalized types:\n  - Merge Request → PullRequest\n  - Project → Repository\n  - Notes → Comments\n\n## GitLab-Specific Considerations\n- GitLab Apps vs OAuth Apps vs Personal Access Tokens\n- Project access tokens\n- Group-level access\n- Self-hosted GitLab support (custom base URL)\n- MR approval rules (GitLab-specific feature)\n\n## Dependencies\n- @gitbeaker/rest or custom fetch-based client\n- GitLab webhook types","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:55:25.425309-08:00","updated_at":"2025-12-29T19:02:03.410786-08:00","closed_at":"2025-12-29T19:02:03.410786-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-ab7","depends_on_id":"cmux-t6p","type":"blocks","created_at":"2025-12-02T22:55:40.153419-08:00","created_by":"daemon"}]}
{"id":"cmux-aq0","title":"Update sandboxes/{id}/ssh endpoint to use Morph SSH tokens","description":"Call Morph API /instance/{instance_id}/ssh/key to get access_token. Return {sshCommand: 'ssh {access_token}@ssh.cloud.morph.so', accessToken, user: 'root'}. Remove websocketUrl field.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:18:45.897665-08:00","updated_at":"2025-12-11T18:35:08.929397-08:00","closed_at":"2025-12-11T18:35:08.929397-08:00","dependencies":[{"issue_id":"cmux-aq0","depends_on_id":"cmux-i0z","type":"blocks","created_at":"2025-12-11T18:20:19.347472-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-b2c","title":"Update UI for multi-provider support","description":"Update frontend components to support multiple git providers.\n\n## Components to Update\n\n### Provider Selection\n- Add provider selector in integration setup flow\n- Show provider icons (GitHub, GitLab, Bitbucket)\n- Update repository selection to show provider context\n\n### Repository Display\n- Show provider badge/icon next to repo names\n- Update repo URL formatting for different providers\n\n### PR/MR Display\n- Normalize 'Pull Request' vs 'Merge Request' terminology\n- Show provider-appropriate icons and links\n\n### Settings Pages\n- Add GitLab connection UI\n- Add Bitbucket connection UI\n- Show connected providers list\n\n## Files to Modify\n- apps/client/src/components/integrations/* \n- apps/client/src/components/repo-selector/*\n- apps/client/src/routes/settings/*\n\n## New Components\n- ProviderIcon - Display provider logo\n- ProviderBadge - Small badge showing provider\n- ProviderSelector - Dropdown/tabs for provider selection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:57:45.888327-08:00","updated_at":"2025-12-29T19:02:03.400992-08:00","closed_at":"2025-12-29T19:02:03.400992-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-b2c","depends_on_id":"cmux-d8u","type":"blocks","created_at":"2025-12-02T22:57:52.621031-08:00","created_by":"daemon"},{"issue_id":"cmux-b2c","depends_on_id":"cmux-d3i","type":"blocks","created_at":"2025-12-02T22:57:52.66606-08:00","created_by":"daemon"},{"issue_id":"cmux-b2c","depends_on_id":"cmux-2i4","type":"blocks","created_at":"2025-12-02T22:57:52.718468-08:00","created_by":"daemon"}]}
{"id":"cmux-b7d","title":"Sync user's neovim/lazyvim config to sandbox","description":"## Problem\nSupport syncing user's nvim configuration (including lazyvim) to sandboxes without slowing down initial creation time.\n\n## Analysis\n\n### Lazyvim directory structure:\n- ~/.config/nvim - Config files, lua scripts, lazy-lock.json (~100KB-1MB)\n- ~/.local/share/nvim - Plugins installed by lazy.nvim (~500MB-2GB!)\n- ~/.local/state/nvim - State files (~small)\n- ~/.cache/nvim - Compiled lua, treesitter parsers (~100MB+)\n\n### Options considered:\n\n**1. Background sync after sandbox ready**\n- Start sandbox without nvim configs, sync in background\n- Con: User might try nvim before sync completes\n\n**2. Volume mount from host**\n- Mount ~/.config/nvim as read-only volume\n- Con: Security concerns, sandbox isolation breaks\n\n**3. Pre-baked image with nvim distributions**\n- Include lazyvim/nvchad in Docker image\n- Con: Large image, not personalized, version mismatches\n\n**4. Smart differential sync**\n- Cache tarball locally, only re-create if changed\n- Con: First run still slow\n\n**5. Config-only sync (RECOMMENDED)**\n- Only sync ~/.config/nvim (~1MB, fast)\n- Let lazy.nvim download plugins on first nvim launch\n- Pro: Small sync, always fresh plugins, personalized config\n- Con: First nvim launch triggers plugin install (~1-2min)\n\n**6. Hybrid with shared plugin volume**\n- Sync config, share plugin volume across sandboxes\n- Pro: Fast after first sandbox ever\n- Con: Complex, plugin conflicts possible\n\n## Recommendation\nStart with option 5 (config-only sync):\n1. Add ~/.config/nvim to sync_files detection\n2. Upload during sandbox creation (adds \u003c1s)\n3. First nvim launch triggers lazy.nvim plugin sync\n\nFuture enhancement: Create shared nvim plugin cache volume.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T17:19:51.204711-08:00","updated_at":"2025-12-29T18:41:31.116489-08:00","closed_at":"2025-12-29T18:41:31.116489-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-bm1","title":"Upgrade node to 25.2.1","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-05T22:29:12.63612-08:00","updated_at":"2025-12-29T18:41:31.104639-08:00","closed_at":"2025-12-29T18:41:31.104639-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-c02","title":"Create video upload HTTP endpoints","description":"Add Convex HTTP endpoints for uploading video files and checkpoint metadata","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T18:13:40.514281-08:00","updated_at":"2025-12-29T19:13:27.134676-08:00","closed_at":"2025-12-29T19:13:27.134676-08:00","close_reason":"Features implemented - video_recordings_http.ts exists, vm list auth fixed","labels":["austin"]}
{"id":"cmux-c3r","title":"CLI shorthand aliases (cmux login, cmux logout)","description":"Add convenient aliases: 'cmux login' -\u003e 'cmux auth login', 'cmux logout' -\u003e 'cmux auth logout'. Common UX pattern for CLIs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T02:17:58.122219-08:00","updated_at":"2025-12-29T19:02:03.372719-08:00","closed_at":"2025-12-29T19:02:03.372719-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-c3r","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T02:18:13.630196-08:00","created_by":"lawrencechen"},{"issue_id":"cmux-c3r","depends_on_id":"cmux-jsg","type":"blocks","created_at":"2025-12-09T02:18:27.844152-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-c6k","title":"Abstract repo URL parsing for git providers","description":"Replace GitHub-specific URL parsing with multi-provider support.\n\n## Current State\n- packages/shared/src/utils/parse-github-repo-url.ts - Only parses GitHub URLs\n- Hardcoded patterns: `github.com`, `git@github.com:`\n\n## Provider URL Formats\n| Provider | HTTPS | SSH |\n|----------|-------|-----|\n| GitHub | https://github.com/owner/repo | git@github.com:owner/repo.git |\n| GitLab | https://gitlab.com/owner/repo | git@gitlab.com:owner/repo.git |\n| Bitbucket | https://bitbucket.org/owner/repo | git@bitbucket.org:owner/repo.git |\n\n## Implementation\n```typescript\n// packages/shared/src/utils/parse-repo-url.ts\ntype Provider = 'github' | 'gitlab' | 'bitbucket' | 'unknown'\n\ninterface ParsedRepoUrl {\n  provider: Provider\n  owner: string\n  repo: string\n  fullName: string\n  url: string\n  gitUrl: string\n}\n\nfunction parseRepoUrl(input: string): ParsedRepoUrl | null\nfunction detectProvider(url: string): Provider\nfunction buildRepoUrl(provider: Provider, owner: string, repo: string): string\n```\n\n## Files to Modify\n- packages/shared/src/utils/parse-github-repo-url.ts → rename to parse-repo-url.ts\n- All files importing parseGithubRepoUrl\n\n## Usages to Update\n- apps/worker/src/screenshotCollector/claudeScreenshotCollectorCli.ts\n- packages/convex/convex/*.ts (multiple files)\n- apps/server/src/socket-handlers.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:29:52.743824-08:00","updated_at":"2025-12-09T01:53:22.12986-08:00","closed_at":"2025-12-03T00:54:28.41948-08:00","dependencies":[{"issue_id":"cmux-c6k","depends_on_id":"cmux-80t","type":"blocks","created_at":"2025-12-02T23:29:58.603415-08:00","created_by":"daemon"}]}
{"id":"cmux-cyr","title":"Abstract webhook handling for git providers","description":"Create unified webhook handling that normalizes events across providers.\n\n## Current State\n- GitHub webhook handler in packages/convex/convex/github_webhook.ts\n- Handles: installation, pull_request, push, workflow_run, check_run, deployment, status, ping\n\n## Webhook Event Mapping\n\n| Normalized Event | GitHub | GitLab | Bitbucket |\n|-----------------|--------|--------|-----------|\n| pr.opened | pull_request.opened | merge_request.open | pullrequest:created |\n| pr.closed | pull_request.closed | merge_request.close | pullrequest:rejected/declined |\n| pr.merged | pull_request.closed+merged | merge_request.merge | pullrequest:fulfilled |\n| pr.updated | pull_request.synchronize | merge_request.update | pullrequest:updated |\n| push | push | push | repo:push |\n| comment | issue_comment | note | pullrequest:comment_* |\n\n## Implementation\n\n### Webhook Router\n```typescript\n// packages/convex/convex/webhook.ts (new unified handler)\nasync function handleWebhook(provider: string, headers: Headers, body: string) {\n  const providerAdapter = getProviderWebhookAdapter(provider)\n  const verified = await providerAdapter.verifySignature(headers, body)\n  const normalizedEvent = providerAdapter.normalizeEvent(JSON.parse(body))\n  // Route to appropriate handler\n}\n```\n\n### Files to Create\n- packages/convex/convex/webhook.ts - Unified entry point\n- packages/convex/convex/webhook_adapters/github.ts\n- packages/convex/convex/webhook_adapters/gitlab.ts\n- packages/convex/convex/webhook_adapters/bitbucket.ts\n\n### Files to Modify\n- packages/convex/convex/github_webhook.ts → Extract to adapter pattern\n- packages/convex/convex/http.ts → Add routes for /webhook/gitlab, /webhook/bitbucket","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:56:08.600244-08:00","updated_at":"2025-12-29T19:02:03.406767-08:00","closed_at":"2025-12-29T19:02:03.406767-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-cyr","depends_on_id":"cmux-t6p","type":"blocks","created_at":"2025-12-02T22:56:13.808374-08:00","created_by":"daemon"},{"issue_id":"cmux-cyr","depends_on_id":"cmux-u5n","type":"blocks","created_at":"2025-12-02T22:56:13.861146-08:00","created_by":"daemon"}]}
{"id":"cmux-d3i","title":"Add GitLab App setup and OAuth flow","description":"Create GitLab App and implement OAuth integration.\n\n## GitLab App Setup\n1. Create GitLab Application at gitlab.com/oauth/applications\n2. Configure scopes: api, read_user, read_repository\n3. Set callback URL to /auth/callback/gitlab\n\n## Implementation\n\n### OAuth Routes\n- GET /auth/gitlab/authorize - Redirect to GitLab OAuth\n- GET /auth/callback/gitlab - Handle OAuth callback\n\n### Stack Auth Integration\n- Add GitLab as OAuth provider in Stack Auth config\n- Store GitLab OAuth tokens\n\n### Environment Variables\n```\nCMUX_GITLAB_APP_ID=\nCMUX_GITLAB_APP_SECRET=\nGITLAB_WEBHOOK_SECRET=\n```\n\n### Files to Create\n- apps/www/lib/routes/gitlab.oauth.route.ts\n- apps/www/lib/routes/gitlab.setup.route.ts\n\n### Considerations\n- GitLab Groups vs Projects access\n- Self-hosted GitLab support (custom baseUrl)\n- GitLab Premium/Ultimate features","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:57:15.971669-08:00","updated_at":"2025-12-29T19:02:03.403628-08:00","closed_at":"2025-12-29T19:02:03.403628-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-d3i","depends_on_id":"cmux-ab7","type":"blocks","created_at":"2025-12-02T22:57:21.401026-08:00","created_by":"daemon"}]}
{"id":"cmux-d8u","title":"Abstract Hono API routes for git providers","description":"Refactor API routes to support multiple providers through abstraction.\n\n## Current GitHub-Specific Routes\nAll in apps/www/lib/routes/github.*.route.ts:\n- github.oauth-token.route.ts\n- github.prs.route.ts (list, open, patch, files, file-contents, etc.)\n- github.repos.route.ts\n- github.install-state.route.ts\n\n## Abstraction Strategy\n\n### Option A: Provider Parameter in Existing Routes\n```typescript\n// /integrations/:provider/prs\n// /integrations/:provider/repos\n// Provider extracted from path parameter\n```\n\n### Option B: Unified Routes with Query Param\n```typescript\n// /integrations/prs?provider=github\n// /integrations/repos?provider=gitlab\n```\n\n### Recommended: Option A with Shared Logic\n```typescript\n// apps/www/lib/routes/integrations/\n//   prs.route.ts        (handles all providers)\n//   repos.route.ts\n//   oauth.route.ts\n//   webhooks.route.ts\n\n// Route handler\napp.get('/integrations/:provider/prs', async (c) =\u003e {\n  const provider = c.req.param('provider')\n  const gitProvider = getGitProvider(provider)\n  return gitProvider.listPullRequests(...)\n})\n```\n\n## Files to Create\n- apps/www/lib/routes/integrations/prs.route.ts\n- apps/www/lib/routes/integrations/repos.route.ts\n- apps/www/lib/routes/integrations/oauth.route.ts\n\n## Files to Deprecate/Migrate\n- apps/www/lib/routes/github.*.route.ts → redirect to new routes\n\n## Backward Compatibility\n- Keep old /integrations/github/* routes working\n- Add deprecation warnings in logs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:56:42.93431-08:00","updated_at":"2025-12-29T19:02:03.40511-08:00","closed_at":"2025-12-29T19:02:03.40511-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-d8u","depends_on_id":"cmux-saz","type":"blocks","created_at":"2025-12-02T22:56:47.893684-08:00","created_by":"daemon"},{"issue_id":"cmux-d8u","depends_on_id":"cmux-u5n","type":"blocks","created_at":"2025-12-02T22:56:47.945075-08:00","created_by":"daemon"}]}
{"id":"cmux-dcg","title":"Update server socket handlers for multi-provider URLs","description":"Update socket handlers that hardcode GitHub URLs to use provider abstraction.\n\n## Current State\napps/server/src/socket-handlers.ts has multiple hardcoded GitHub URLs:\n- Line 824: `https://github.com/${projectFullName}.git`\n- Line 1980: `targetRepoUrl: https://github.com/${repoFullName}.git`\n- Line 2170: `repoUrl: https://github.com/manaflow-ai/cmux.git`\n\nOther files:\n- apps/server/src/utils/refreshGitHubData.ts: `https://github.com/${repo}.git`\n- apps/server/src/utils/ensureRunWorktree.ts: `https://github.com/${task.projectFullName}.git`\n- apps/server/native/core/src/repo/cache.rs: `https://github.com/{}.git`\n\n## Implementation\n- Import URL builder from provider abstraction\n- Get provider from task/environment context\n- Build correct clone URL based on provider\n\n```typescript\n// Before\nconst repoUrl = `https://github.com/${fullName}.git`\n\n// After\nconst repoUrl = buildCloneUrl(provider, fullName)\n// or\nconst repoUrl = getProviderHelper(provider).buildCloneUrl(fullName)\n```\n\n## Files to Modify\n- apps/server/src/socket-handlers.ts\n- apps/server/src/utils/refreshGitHubData.ts\n- apps/server/src/utils/ensureRunWorktree.ts\n- apps/server/native/core/src/repo/cache.rs (Rust)\n\n## Considerations\n- Provider should come from task.provider or environment.provider\n- Need to handle cases where provider is not set (default to GitHub for backward compat)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:31:17.074131-08:00","updated_at":"2025-12-29T19:02:03.382549-08:00","closed_at":"2025-12-29T19:02:03.382549-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-dcg","depends_on_id":"cmux-c6k","type":"blocks","created_at":"2025-12-02T23:31:22.679867-08:00","created_by":"daemon"},{"issue_id":"cmux-dcg","depends_on_id":"cmux-idf","type":"blocks","created_at":"2025-12-02T23:31:22.73036-08:00","created_by":"daemon"}]}
{"id":"cmux-dit","title":"Configure git diff to always use less pager even for small diffs","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-02T15:28:38.675495-08:00","updated_at":"2025-12-09T01:53:22.149249-08:00","closed_at":"2025-12-02T16:49:12.05496-08:00","labels":["sandbox"]}
{"id":"cmux-dn6","title":"Fix dmux vm list 401 Unauthorized error","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-09T19:02:06.206257-08:00","updated_at":"2025-12-29T19:13:27.137845-08:00","closed_at":"2025-12-29T19:13:27.137845-08:00","close_reason":"Features implemented - video_recordings_http.ts exists, vm list auth fixed","labels":["austin"]}
{"id":"cmux-edx","title":"Race condition: rapid sandbox creation causes state tearing","description":"When creating many sandboxes very quickly, there's 'tearing' of the state - the 'Creating sandbox' placeholder is not always correctly associated with the actual sandbox being created. This suggests a race condition in how placeholders are matched to completed sandboxes.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T18:12:02.199172-08:00","updated_at":"2025-12-09T01:53:22.142436-08:00","closed_at":"2025-12-02T18:32:38.76567-08:00","labels":["sandbox"]}
{"id":"cmux-fee","title":"Remove custom sshd port 22222 config","description":"Keep port 22 for Morph internal SSH. Remove port 22222 from /etc/ssh/sshd_config.d/cmux.conf. Update check-ssh-service task to only verify port 22.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:18:58.906447-08:00","updated_at":"2025-12-11T18:35:08.932014-08:00","closed_at":"2025-12-11T18:35:08.932014-08:00","dependencies":[{"issue_id":"cmux-fee","depends_on_id":"cmux-i0z","type":"blocks","created_at":"2025-12-11T18:20:32.496996-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-fy2","title":"Abstract token retrieval for git providers","description":"Abstract OAuth token retrieval to support multiple providers.\n\n## Current State\nFiles with GitHub-specific token retrieval:\n- apps/server/src/utils/getGitHubToken.ts - Gets GitHub OAuth token from Stack Auth or gh CLI\n- apps/www/lib/routes/github.oauth-token.route.ts - Returns GitHub OAuth token\n\n## Token Sources\n| Source | GitHub | GitLab | Bitbucket |\n|--------|--------|--------|-----------|\n| Stack Auth | getConnectedAccount('github') | getConnectedAccount('gitlab') | getConnectedAccount('bitbucket') |\n| CLI | gh auth token | glab auth token | N/A (no official CLI) |\n| Env var | GITHUB_TOKEN | GITLAB_TOKEN | BITBUCKET_TOKEN |\n\n## Implementation\n```typescript\n// apps/server/src/utils/getProviderToken.ts\ntype Provider = 'github' | 'gitlab' | 'bitbucket'\n\nasync function getProviderToken(provider: Provider): Promise\u003cstring | null\u003e\nasync function getProviderTokenFromStackAuth(provider: Provider): Promise\u003cstring | null\u003e\nasync function getProviderTokenFromCli(provider: Provider): Promise\u003cstring | null\u003e\n```\n\n## Files to Modify\n- apps/server/src/utils/getGitHubToken.ts → rename to getProviderToken.ts\n- apps/www/lib/routes/github.oauth-token.route.ts → abstract to provider route\n\n## CLI Considerations\n- GitHub: `gh auth token` (widely available)\n- GitLab: `glab auth token` (less common)\n- Bitbucket: No official CLI, may need to skip or use env var","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:30:11.071188-08:00","updated_at":"2025-12-29T19:02:03.387463-08:00","closed_at":"2025-12-29T19:02:03.387463-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-fy2","depends_on_id":"cmux-u5n","type":"blocks","created_at":"2025-12-02T23:30:18.569684-08:00","created_by":"daemon"}]}
{"id":"cmux-gnz","title":"Port cmux-env (envctl/envd) - directory-scoped environment variable daemon","description":"Port the cmux-env crate from ../../crates/cmux-env to packages/sandbox.\n\n**Features to port:**\n- envd daemon that manages environment variables via Unix socket\n- envctl CLI client for set/get/unset/list/load operations  \n- Directory-scoped env vars (not just global) - variables can be scoped to specific directories\n- Generation-based diffing for efficient shell hook updates\n- Shell hooks for bash/zsh/fish to automatically pick up env changes\n- .env file loading (with base64 support)\n- Auto-start daemon on first client request\n\n**Use cases:**\n- Allow agents to set env vars that persist across terminal sessions\n- Directory-scoped variables for project-specific configs\n- Shell integration for seamless env var propagation","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T18:58:06.832529-08:00","updated_at":"2025-12-29T18:41:31.111459-08:00","closed_at":"2025-12-29T18:41:31.111459-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-grc","title":"Implement checkpoint capture system","description":"Capture checkpoints with timestamps and descriptions when agent performs significant actions (commits, file changes, commands)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T18:13:38.568085-08:00","updated_at":"2025-12-29T18:55:38.573143-08:00","closed_at":"2025-12-29T18:55:38.573143-08:00","close_reason":"Implemented automatic checkpoint detection: created useAutoCheckpoints hook that monitors task run state (commits, status, workspace) and automatically adds checkpoints during recording","labels":["austin"]}
{"id":"cmux-h5h","title":"Remove user-ssh-keys feature","description":"Remove: apps/www/lib/routes/user-ssh-keys.route.ts, packages/convex/convex/userSshKeys.ts, userSshKeys table from schema.ts. Morph tokens handle auth instead.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:22:05.474661-08:00","updated_at":"2025-12-11T18:35:08.934025-08:00","closed_at":"2025-12-11T18:35:08.934025-08:00","dependencies":[{"issue_id":"cmux-h5h","depends_on_id":"cmux-i0z","type":"blocks","created_at":"2025-12-11T18:22:16.470615-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-hre","title":"Fix remaining escape sequence TODOs from docs/escape-sequence-todos.md","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T15:28:35.721736-08:00","updated_at":"2025-12-09T01:53:22.145039-08:00","closed_at":"2025-12-02T16:38:11.260382-08:00","labels":["sandbox"]}
{"id":"cmux-i0z","title":"Simplify SSH using Morph per-instance tokens","description":"Replace custom ws-ssh-proxy + SSH-over-HTTPS with Morph's native per-instance SSH tokens. Users can simply: ssh {access_token}@ssh.cloud.morph.so","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-11T18:18:25.091918-08:00","updated_at":"2025-12-11T18:44:43.829694-08:00","closed_at":"2025-12-11T18:44:43.829694-08:00"}
{"id":"cmux-ic9","title":"Set up SSH access to sandboxes","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T21:10:42.153335-08:00","updated_at":"2025-12-09T01:53:22.141791-08:00","closed_at":"2025-12-03T20:15:01.371052-08:00","labels":["sandbox"]}
{"id":"cmux-idf","title":"Abstract git credentials setup in containers/sandboxes","description":"Abstract git credential setup to support multiple providers in Docker containers and sandboxes.\n\n## Current State (GitHub-only)\nFiles with hardcoded github.com credentials:\n- apps/server/src/utils/dockerGitSetup.ts - Writes `https://oauth:${token}@github.com`\n- apps/server/src/vscode/DockerVSCodeInstance.ts - Uses `gh auth login`\n- apps/worker/src/index.ts - Writes github.com git credentials\n- packages/convex/convex/preview_jobs_worker.ts - Uses `gh auth login`\n- packages/sandbox/src/*.rs - Caches `gh auth status`\n\n## Provider CLI Tools\n| Provider | CLI | Auth Command |\n|----------|-----|--------------|\n| GitHub | gh | gh auth login --with-token |\n| GitLab | glab | glab auth login --token |\n| Bitbucket | N/A | git config credential.helper |\n\n## Git Credentials Format\n```\n# Multi-provider git-credentials file\nhttps://oauth:${githubToken}@github.com\nhttps://oauth:${gitlabToken}@gitlab.com\nhttps://x-token-auth:${bitbucketToken}@bitbucket.org\n```\n\n## Implementation\n```typescript\ninterface GitCredential {\n  provider: Provider\n  host: string\n  username: string\n  token: string\n}\n\nfunction buildGitCredentialsFile(credentials: GitCredential[]): string\nfunction setupProviderCliAuth(provider: Provider, token: string): Promise\u003cvoid\u003e\n```\n\n## Files to Modify\n- apps/server/src/utils/dockerGitSetup.ts\n- apps/server/src/vscode/DockerVSCodeInstance.ts\n- apps/worker/src/index.ts\n- packages/convex/convex/preview_jobs_worker.ts\n\n## Sandbox (Rust) Changes\n- packages/sandbox/src/service.rs - Cache per-provider auth status\n- packages/sandbox/src/bin/server.rs - Handle provider-specific CLI checks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:30:37.399675-08:00","updated_at":"2025-12-29T19:02:03.385776-08:00","closed_at":"2025-12-29T19:02:03.385776-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-idf","depends_on_id":"cmux-fy2","type":"blocks","created_at":"2025-12-02T23:30:43.891927-08:00","created_by":"daemon"},{"issue_id":"cmux-idf","depends_on_id":"cmux-c6k","type":"blocks","created_at":"2025-12-02T23:30:43.932851-08:00","created_by":"daemon"}]}
{"id":"cmux-jiw","title":"Abstract PR comments posting for git providers","description":"Abstract the PR comment posting functionality used by preview screenshots.\n\n## Current State\n- packages/convex/convex/github_pr_comments.ts - Posts screenshot previews as PR comments\n- Uses Octokit directly for GitHub API\n- Creates/updates/collapses comments on PRs\n- Includes 0github.com diff heatmap links (GitHub-specific)\n\n## Provider Differences\n| Feature | GitHub | GitLab | Bitbucket |\n|---------|--------|--------|-----------|\n| PR Comments | Issue comments API | MR Notes API | PR Comments API |\n| Reactions | Reactions API | Award Emoji API | Not supported |\n| Collapse old | HTML details tag | Same | Same |\n| Diff view URL | 0github.com (custom) | GitLab native diff | Bitbucket native diff |\n\n## Implementation\n```typescript\ninterface PRCommentsProvider {\n  createComment(repo: string, prNumber: number, body: string): Promise\u003cCommentResult\u003e\n  updateComment(repo: string, commentId: number, body: string): Promise\u003cCommentResult\u003e\n  listComments(repo: string, prNumber: number): Promise\u003cComment[]\u003e\n  addReaction?(repo: string, prNumber: number, reaction: string): Promise\u003cvoid\u003e\n}\n```\n\n## Files to Modify\n- packages/convex/convex/github_pr_comments.ts → abstract\n\n## Considerations\n- 0github.com is GitHub-specific (diff heatmap viewer)\n- Need provider-specific diff URLs or skip for non-GitHub\n- Reaction support varies by provider","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:12:18.085123-08:00","updated_at":"2025-12-29T19:02:03.396374-08:00","closed_at":"2025-12-29T19:02:03.396374-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-jiw","depends_on_id":"cmux-lv3","type":"blocks","created_at":"2025-12-02T23:12:24.11438-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg","title":"CLI SSH Access to Morph Sandboxes","description":"Allow users to SSH into cmux sandboxes (Morph-backed) with:\n- Authentication via Stack Auth (browser-based login)\n- SSH key registration (reuse existing keys)\n- Works with VSCode, Zed, Cursor, and any SSH client\n- No Morph branding visible to users\n\nUser flow:\n1. brew install cmux/tap/cmux (or npm install -g @cmux/cli)\n2. cmux auth login (browser opens, Stack Auth)\n3. cmux ssh-keys add (registers ~/.ssh/id_ed25519.pub)\n4. cmux ssh sandbox-abc123 (connects)\n5. cmux ssh-config (for VSCode/Zed/Cursor)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T01:40:03.970141-08:00","updated_at":"2025-12-10T16:42:18.806267-08:00","closed_at":"2025-12-10T16:42:18.806267-08:00"}
{"id":"cmux-jsg.1","title":"Configure sshd on port 22222 in Morph snapshot","description":"Update scripts/snapshot.py to configure OpenSSH server on port 22222 in the base Morph snapshot.\n\nChanges to add:\n- Install openssh-server\n- Configure /etc/ssh/sshd_config:\n  - Port 22222\n  - PermitRootLogin prohibit-password  \n  - PubkeyAuthentication yes\n  - PasswordAuthentication no\n  - AuthorizedKeysFile .ssh/authorized_keys\n- Generate host keys (ssh-keygen -A)\n- Create /root/.ssh directory with correct permissions\n- Enable and start sshd service\n- Ensure sshd persists after snapshot (systemd enabled)\n\nLocation: scripts/snapshot.py","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:40:13.788822-08:00","updated_at":"2025-12-09T03:27:40.320057-08:00","closed_at":"2025-12-09T03:27:40.320057-08:00","dependencies":[{"issue_id":"cmux-jsg.1","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:40:13.790084-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.10","title":"Publish CLI via Homebrew","description":"Set up Homebrew tap for distributing the cmux CLI.\n\nCreate new repo or directory: cmux/homebrew-tap (or packaging/homebrew/)\n\nFormula (cmux.rb):\n```ruby\nclass Cmux \u003c Formula\n  desc 'CLI for cmux sandboxes'\n  homepage 'https://cmux.sh'\n  version '0.1.0'\n\n  on_macos do\n    if Hardware::CPU.arm?\n      url 'https://github.com/manaflow-ai/cmux/releases/download/v0.1.0/cmux-aarch64-apple-darwin.tar.gz'\n      sha256 '...'\n    else\n      url 'https://github.com/manaflow-ai/cmux/releases/download/v0.1.0/cmux-x86_64-apple-darwin.tar.gz'\n      sha256 '...'\n    end\n  end\n\n  on_linux do\n    url 'https://github.com/manaflow-ai/cmux/releases/download/v0.1.0/cmux-x86_64-unknown-linux-gnu.tar.gz'\n    sha256 '...'\n  end\n\n  def install\n    bin.install 'cmux'\n  end\n\n  test do\n    system '\\#{bin}/cmux', '--version'\n  end\nend\n```\n\nBuild targets needed (via cargo/cross):\n- x86_64-apple-darwin\n- aarch64-apple-darwin\n- x86_64-unknown-linux-gnu\n- aarch64-unknown-linux-gnu\n\nCI workflow:\n1. On release tag, build all targets\n2. Create GitHub release with binaries\n3. Update Homebrew formula with new SHA256s\n4. Push to homebrew-tap repo\n\nInstall command: brew install cmux/tap/cmux","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T01:42:06.361537-08:00","updated_at":"2025-12-29T19:02:03.37644-08:00","closed_at":"2025-12-29T19:02:03.37644-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-jsg.10","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:42:06.363711-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.10","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T01:42:06.365692-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.10","depends_on_id":"cmux-jsg.7","type":"blocks","created_at":"2025-12-09T01:42:06.368788-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.10","depends_on_id":"cmux-jsg.8","type":"blocks","created_at":"2025-12-09T01:42:06.371038-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.10","depends_on_id":"cmux-jsg.9","type":"blocks","created_at":"2025-12-09T01:42:06.37289-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.10","depends_on_id":"cmux-jsg.17","type":"blocks","created_at":"2025-12-09T01:43:55.517512-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.11","title":"Publish CLI via npm","description":"Set up npm package for distributing the cmux CLI.\n\nLocation: packages/cmux-cli-npm/ (new package)\n\nThis is a thin wrapper that downloads the appropriate binary for the platform.\n\npackage.json:\n```json\n{\n  \"name\": \"@cmux/cli\",\n  \"version\": \"0.1.0\",\n  \"description\": \"CLI for cmux sandboxes\",\n  \"bin\": { \"cmux\": \"./bin/cmux\" },\n  \"scripts\": {\n    \"postinstall\": \"node scripts/install.js\"\n  },\n  \"os\": [\"darwin\", \"linux\"],\n  \"cpu\": [\"x64\", \"arm64\"]\n}\n```\n\nscripts/install.js:\n- Detect platform (darwin/linux) and arch (x64/arm64)\n- Download binary from GitHub releases\n- Extract to bin/cmux\n- Make executable (chmod +x)\n\nSimilar pattern used by: esbuild, turbo, prisma, etc.\n\nAlternative approach: platform-specific optional deps\n```json\n{\n  \"optionalDependencies\": {\n    \"@cmux/cli-darwin-arm64\": \"0.1.0\",\n    \"@cmux/cli-darwin-x64\": \"0.1.0\",\n    \"@cmux/cli-linux-x64\": \"0.1.0\",\n    \"@cmux/cli-linux-arm64\": \"0.1.0\"\n  }\n}\n```\n\nInstall commands:\n- npm install -g @cmux/cli\n- npx @cmux/cli ssh sandbox-xxx\n- bunx @cmux/cli ssh sandbox-xxx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T01:42:19.089205-08:00","updated_at":"2025-12-29T19:02:03.374694-08:00","closed_at":"2025-12-29T19:02:03.374694-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-jsg.11","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:42:19.091134-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.11","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T01:42:19.093362-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.11","depends_on_id":"cmux-jsg.7","type":"blocks","created_at":"2025-12-09T01:42:19.096533-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.11","depends_on_id":"cmux-jsg.8","type":"blocks","created_at":"2025-12-09T01:42:19.098823-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.11","depends_on_id":"cmux-jsg.9","type":"blocks","created_at":"2025-12-09T01:42:19.10104-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.11","depends_on_id":"cmux-jsg.17","type":"blocks","created_at":"2025-12-09T01:43:55.568301-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.12","title":"Test: Morph snapshot sshd configuration","description":"Test that the updated Morph snapshot has sshd properly configured.\n\nAfter rebuilding snapshot (scripts/snapshot.py):\n\n1. Verify sshd is running on port 22222:\n```bash\nuvx --env-file .env morphcloud instance exec morphvm_xxx 'ss -tlnp | grep 22222'\n# Expected: LISTEN on port 22222\n```\n\n2. Verify sshd service is enabled:\n```bash\nuvx --env-file .env morphcloud instance exec morphvm_xxx 'systemctl status ssh'\n# Expected: active (running)\n```\n\n3. Verify sshd config:\n```bash\nuvx --env-file .env morphcloud instance exec morphvm_xxx 'grep -E \"^Port|^PermitRootLogin|^PubkeyAuthentication|^PasswordAuthentication\" /etc/ssh/sshd_config'\n# Expected:\n# Port 22222\n# PermitRootLogin prohibit-password\n# PubkeyAuthentication yes\n# PasswordAuthentication no\n```\n\n4. Verify /root/.ssh exists with correct permissions:\n```bash\nuvx --env-file .env morphcloud instance exec morphvm_xxx 'ls -la /root/.ssh'\nuvx --env-file .env morphcloud instance exec morphvm_xxx 'stat -c %a /root/.ssh'\n# Expected: 700\n```\n\n5. Test SSH connection (after injecting a test key):\n```bash\n# Inject test key\nuvx --env-file .env morphcloud instance exec morphvm_xxx 'echo \"ssh-ed25519 AAAA... test@test\" \u003e\u003e /root/.ssh/authorized_keys'\n# Try to connect\nssh -p 22222 -o StrictHostKeyChecking=no root@\u003cinstance-host\u003e\n```\n\n6. Verify snapshot persistence (pause and resume):\n- Pause instance\n- Resume instance\n- Verify sshd still running","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:42:33.526909-08:00","updated_at":"2025-12-10T16:04:34.006516-08:00","closed_at":"2025-12-10T16:04:34.006516-08:00","labels":["testing"],"dependencies":[{"issue_id":"cmux-jsg.12","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:42:33.528226-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.12","depends_on_id":"cmux-jsg.1","type":"blocks","created_at":"2025-12-09T01:42:33.532037-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.13","title":"Test: SSH key API endpoints","description":"Test the SSH key management API endpoints.\n\nPrerequisites:\n- Dev server running\n- Stack Auth token available\n\nTest cases:\n\n1. List keys (empty):\n```bash\ncurl -X GET https://cmux.sh/api/user/ssh-keys \\\n  -H 'Authorization: Bearer $TOKEN'\n# Expected: []\n```\n\n2. Add key:\n```bash\ncurl -X POST https://cmux.sh/api/user/ssh-keys \\\n  -H 'Authorization: Bearer $TOKEN' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"publicKey\": \"ssh-ed25519 AAAA...\", \"name\": \"Test Key\"}'\n# Expected: { \"id\": \"...\", \"fingerprint\": \"SHA256:...\" }\n```\n\n3. List keys (with key):\n```bash\ncurl -X GET https://cmux.sh/api/user/ssh-keys \\\n  -H 'Authorization: Bearer $TOKEN'\n# Expected: [{ \"id\": \"...\", \"name\": \"Test Key\", \"fingerprint\": \"...\", ... }]\n```\n\n4. Invalid key format:\n```bash\ncurl -X POST https://cmux.sh/api/user/ssh-keys \\\n  -H 'Authorization: Bearer $TOKEN' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"publicKey\": \"not a valid key\", \"name\": \"Bad Key\"}'\n# Expected: 400 Bad Request\n```\n\n5. Delete key:\n```bash\ncurl -X DELETE https://cmux.sh/api/user/ssh-keys/$KEY_ID \\\n  -H 'Authorization: Bearer $TOKEN'\n# Expected: { \"success\": true }\n```\n\n6. Import from GitHub:\n```bash\ncurl -X POST https://cmux.sh/api/user/ssh-keys/import-github \\\n  -H 'Authorization: Bearer $TOKEN'\n# Expected: { \"imported\": N, \"keys\": [...] }\n```\n\n7. Unauthorized access:\n```bash\ncurl -X GET https://cmux.sh/api/user/ssh-keys\n# Expected: 401 Unauthorized\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:42:46.205008-08:00","updated_at":"2025-12-10T16:21:29.264668-08:00","closed_at":"2025-12-10T16:21:29.264668-08:00","labels":["testing"],"dependencies":[{"issue_id":"cmux-jsg.13","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:42:46.206393-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.13","depends_on_id":"cmux-jsg.3","type":"blocks","created_at":"2025-12-09T01:42:46.208905-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.14","title":"Test: CLI authentication flow","description":"Test the CLI authentication via Stack Auth.\n\nPrerequisites:\n- CLI built (cargo build --release)\n- Stack Auth configured for cmux.sh\n\nTest cases:\n\n1. Login flow:\n```bash\n./target/release/cmux auth login\n# Expected: Browser opens to cmux.sh/handler/cli-auth-confirm\n# After login: '✓ Logged in successfully!'\n```\n\n2. Auth status (logged in):\n```bash\n./target/release/cmux auth status\n# Expected: 'Logged in as \u003cemail\u003e'\n```\n\n3. Auth token:\n```bash\n./target/release/cmux auth token\n# Expected: Prints valid JWT\n```\n\n4. Logout:\n```bash\n./target/release/cmux auth logout\n# Expected: '✓ Logged out successfully'\n```\n\n5. Auth status (logged out):\n```bash\n./target/release/cmux auth status\n# Expected: 'Not logged in. Run cmux auth login.'\n```\n\n6. Token in keychain (macOS):\n```bash\nsecurity find-generic-password -s cmux -a refresh_token -w\n# Expected: Returns refresh token\n```\n\n7. Token persistence:\n- Login\n- Quit terminal\n- Open new terminal\n- Run 'cmux auth status'\n- Expected: Still logged in\n\n8. Token refresh:\n- Login\n- Wait or manually expire access token\n- Run command requiring auth\n- Expected: Auto-refreshes using refresh token","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:43:05.228467-08:00","updated_at":"2025-12-10T16:22:58.735948-08:00","closed_at":"2025-12-10T16:22:58.735948-08:00","labels":["testing"],"dependencies":[{"issue_id":"cmux-jsg.14","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:43:05.230935-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.14","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T01:43:05.233392-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.15","title":"Test: CLI SSH key management","description":"Test the CLI SSH key management commands.\n\nPrerequisites:\n- CLI built\n- Logged in (cmux auth login)\n\nTest cases:\n\n1. List keys (empty):\n```bash\n./target/release/cmux ssh-keys list\n# Expected: 'No SSH keys registered.'\n```\n\n2. Add key from default location:\n```bash\n./target/release/cmux ssh-keys add\n# Expected:\n# Found SSH public key at ~/.ssh/id_ed25519.pub\n# Fingerprint: SHA256:...\n# Key name [hostname]: \n# ✓ SSH key registered successfully\n```\n\n3. Add key from custom path:\n```bash\n./target/release/cmux ssh-keys add ~/.ssh/id_rsa.pub\n# Expected: Similar to above\n```\n\n4. List keys (with keys):\n```bash\n./target/release/cmux ssh-keys list\n# Expected: Table with NAME, FINGERPRINT, SOURCE, CREATED\n```\n\n5. Import from GitHub:\n```bash\n./target/release/cmux ssh-keys add --from-github\n# Expected: 'Imported N keys from GitHub'\n```\n\n6. Remove key:\n```bash\n./target/release/cmux ssh-keys remove SHA256:abc123...\n# Expected: '✓ Key removed'\n```\n\n7. Add non-existent file:\n```bash\n./target/release/cmux ssh-keys add /nonexistent/key.pub\n# Expected: Error message\n```\n\n8. Add invalid key format:\n```bash\necho 'not a key' \u003e /tmp/bad.pub\n./target/release/cmux ssh-keys add /tmp/bad.pub\n# Expected: 'Invalid SSH public key format'\n```\n\n9. Not logged in:\n```bash\n./target/release/cmux auth logout\n./target/release/cmux ssh-keys list\n# Expected: 'Not logged in. Run cmux auth login first.'\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:43:17.101796-08:00","updated_at":"2025-12-10T16:24:35.713987-08:00","closed_at":"2025-12-10T16:24:35.713987-08:00","labels":["testing"],"dependencies":[{"issue_id":"cmux-jsg.15","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:43:17.103449-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.15","depends_on_id":"cmux-jsg.7","type":"blocks","created_at":"2025-12-09T01:43:17.107642-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.15","depends_on_id":"cmux-jsg.14","type":"blocks","created_at":"2025-12-09T01:43:17.110312-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.16","title":"Test: CLI SSH connection","description":"Test the CLI SSH connection commands.\n\nPrerequisites:\n- CLI built\n- Logged in\n- SSH key registered\n- Running Morph sandbox with key injected\n\nTest cases:\n\n1. Basic SSH connection:\n```bash\n./target/release/cmux ssh \u003csandbox-id\u003e\n# Expected: Shell prompt appears\n# Run: whoami\n# Expected: root\n# Run: pwd\n# Expected: /root or /workspace\n# Exit with: exit or Ctrl+D\n```\n\n2. Run command directly:\n```bash\n./target/release/cmux ssh \u003csandbox-id\u003e -- ls /workspace\n# Expected: List of files\n# Should exit after command completes\n```\n\n3. Port forwarding:\n```bash\n./target/release/cmux ssh \u003csandbox-id\u003e -L 8080:localhost:8080\n# In sandbox: python -m http.server 8080\n# On host: curl http://localhost:8080\n# Expected: HTTP response from sandbox\n```\n\n4. ProxyCommand helper:\n```bash\n./target/release/cmux _ssh-proxy \u003csandbox-id\u003e\n# Expected: Waits for input (it's a pipe)\n# Ctrl+C to exit\n```\n\n5. Invalid sandbox ID:\n```bash\n./target/release/cmux ssh nonexistent-sandbox\n# Expected: 'Sandbox not found' or similar error\n```\n\n6. Sandbox user doesn't have access to:\n```bash\n./target/release/cmux ssh \u003cother-teams-sandbox\u003e\n# Expected: 'Access denied' or 'Forbidden'\n```\n\n7. Task run ID resolution:\n```bash\n./target/release/cmux ssh task-run-\u003cid\u003e\n# Expected: Connects to most recent sandbox for that task run\n```\n\n8. Connection with editors (after ssh-config):\n```bash\nssh sandbox-\u003cid\u003e\n# Expected: Same as 'cmux ssh \u003cid\u003e'\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:43:31.627713-08:00","updated_at":"2025-12-10T16:37:39.269945-08:00","closed_at":"2025-12-10T16:37:39.269945-08:00","labels":["testing"],"dependencies":[{"issue_id":"cmux-jsg.16","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:43:31.629329-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.16","depends_on_id":"cmux-jsg.8","type":"blocks","created_at":"2025-12-09T01:43:31.634099-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.16","depends_on_id":"cmux-jsg.15","type":"blocks","created_at":"2025-12-09T01:43:31.635951-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.16","depends_on_id":"cmux-jsg.12","type":"blocks","created_at":"2025-12-09T01:43:31.637812-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.17","title":"Test: End-to-end SSH with VSCode/Cursor/Zed","description":"End-to-end test of SSH access with popular editors.\n\nPrerequisites:\n- All previous tests passing\n- cmux CLI installed (brew or npm)\n- SSH config installed (cmux ssh-config --install)\n\nTest with VSCode:\n1. Open VSCode\n2. Install 'Remote - SSH' extension if not installed\n3. Cmd+Shift+P → 'Remote-SSH: Connect to Host'\n4. Select 'sandbox-\u003cid\u003e'\n5. Expected: VSCode opens remote window\n6. Open folder /workspace\n7. Edit a file, save\n8. Open terminal, run commands\n9. Verify changes persist\n\nTest with Cursor:\n1. Open Cursor\n2. Cmd+Shift+P → 'Remote-SSH: Connect to Host'\n3. Select 'sandbox-\u003cid\u003e'\n4. Expected: Cursor opens remote window\n5. Verify AI features work in remote context\n\nTest with Zed (if supported):\n1. Open Zed\n2. Connect via SSH (check Zed docs for method)\n3. Verify connection works\n\nTest persistence:\n1. Connect to sandbox\n2. Create a file\n3. Disconnect\n4. Reconnect\n5. Verify file still exists\n\nTest multiple concurrent connections:\n1. Open VSCode connected to sandbox\n2. Also run 'cmux ssh \u003cid\u003e' in terminal\n3. Both should work simultaneously\n\nTest with port forwarding in editor:\n1. In VSCode remote, start dev server on port 3000\n2. VSCode should auto-forward port\n3. Access localhost:3000 on host\n4. Expected: Dev server responds","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:43:44.341888-08:00","updated_at":"2025-12-10T16:38:03.96972-08:00","closed_at":"2025-12-10T16:38:03.96972-08:00","labels":["testing"],"dependencies":[{"issue_id":"cmux-jsg.17","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:43:44.34308-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.17","depends_on_id":"cmux-jsg.9","type":"blocks","created_at":"2025-12-09T01:43:44.352288-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.17","depends_on_id":"cmux-jsg.16","type":"blocks","created_at":"2025-12-09T01:43:44.354836-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.2","title":"Add userSshKeys table to Convex schema","description":"Add new table to store user SSH public keys in Convex.\n\nLocation: packages/convex/convex/schema.ts\n\nSchema:\n```typescript\nuserSshKeys: defineTable({\n  userId: v.string(),           // Stack Auth user ID\n  name: v.string(),             // 'MacBook Pro', 'Work Laptop'\n  publicKey: v.string(),        // 'ssh-ed25519 AAAA...'\n  fingerprint: v.string(),      // SHA256 fingerprint for lookup\n  source: v.union(\n    v.literal('manual'),        // User pasted/uploaded\n    v.literal('github'),        // Imported from GitHub\n    v.literal('local'),         // Read from ~/.ssh/*.pub\n  ),\n  createdAt: v.number(),\n  lastUsedAt: v.optional(v.number()),\n})\n  .index('by_user', ['userId'])\n  .index('by_user_fingerprint', ['userId', 'fingerprint']),\n```\n\nAlso create packages/convex/convex/userSshKeys.ts with:\n- listByUser query\n- getByFingerprint query  \n- create mutation\n- remove mutation\n- updateLastUsed mutation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:40:24.383606-08:00","updated_at":"2025-12-09T03:27:46.759762-08:00","closed_at":"2025-12-09T03:27:46.759762-08:00","dependencies":[{"issue_id":"cmux-jsg.2","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:40:24.384623-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.3","title":"API endpoints for SSH key management","description":"Create Hono API endpoints for managing user SSH keys.\n\nLocation: apps/www/lib/routes/user-ssh-keys.route.ts (new file)\n\nEndpoints:\n\nGET /api/user/ssh-keys\n- Auth: Stack Auth token required\n- Returns: [{ id, name, fingerprint, source, createdAt }]\n\nPOST /api/user/ssh-keys\n- Auth: Stack Auth token required\n- Body: { publicKey: string, name: string }\n- Validates public key format\n- Computes fingerprint\n- Returns: { id, fingerprint }\n\nDELETE /api/user/ssh-keys/:id\n- Auth: Stack Auth token required\n- Verifies ownership\n- Returns: { success: true }\n\nPOST /api/user/ssh-keys/import-github\n- Auth: Stack Auth token required\n- Uses connected GitHub account to fetch keys\n- Imports all public keys from GitHub\n- Returns: { imported: number, keys: [...] }\n\nAlso update apps/www/lib/routes/index.ts to register the new router.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:40:33.76361-08:00","updated_at":"2025-12-09T03:27:53.520375-08:00","closed_at":"2025-12-09T03:27:53.520375-08:00","dependencies":[{"issue_id":"cmux-jsg.3","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:40:33.765223-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.3","depends_on_id":"cmux-jsg.2","type":"blocks","created_at":"2025-12-09T01:40:33.767463-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.3","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T02:16:36.610596-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-jsg.4","title":"API endpoint for sandbox SSH connection info","description":"Add API endpoint to get SSH connection details for a sandbox.\n\nLocation: apps/www/lib/routes/sandboxes.route.ts\n\nEndpoint:\n\nGET /api/sandboxes/:id/ssh\n- Auth: Stack Auth token required\n- Verifies user has access to sandbox (team membership)\n- Returns:\n  {\n    morphInstanceId: string,     // e.g. 'morphvm_xxx'\n    host: string,                // e.g. 'ssh.cloud.morph.so'\n    port: number,                // e.g. 22\n    user: string,                // e.g. 'morphvm_xxx' (Morph uses instance ID as username)\n  }\n\nThe CLI will use this info to construct the SSH connection.\nUser never sees Morph branding - CLI handles the translation.\n\nNote: Also need to handle task-run IDs, not just sandbox IDs.\nIf user passes a task-run ID, resolve to the most recent active sandbox for that run.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:40:43.156929-08:00","updated_at":"2025-12-09T03:28:00.605879-08:00","closed_at":"2025-12-09T03:28:00.605879-08:00","dependencies":[{"issue_id":"cmux-jsg.4","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:40:43.158959-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.4","depends_on_id":"cmux-jsg.2","type":"blocks","created_at":"2025-12-09T01:40:43.161075-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.4","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T02:16:41.726572-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-jsg.5","title":"Inject user SSH keys when creating Morph sandbox","description":"When a Morph sandbox is created, inject all of the user's registered SSH public keys into the instance.\n\nLocation: apps/www/lib/routes/morph.route.ts (in setup-instance flow)\n\nImplementation:\n```typescript\nasync function injectUserSshKeys(instance: Instance, userId: string) {\n  const convex = getConvex({ accessToken });\n  const keys = await convex.query(api.userSshKeys.listByUser, { userId });\n\n  if (keys.length === 0) {\n    console.log('[ssh] No SSH keys registered for user');\n    return;\n  }\n\n  const authorizedKeys = keys.map(k =\u003e k.publicKey).join('\\n');\n\n  await instance.exec(`\n    mkdir -p /root/.ssh \u0026\u0026 chmod 700 /root/.ssh\n    cat \u003e\u003e /root/.ssh/authorized_keys \u003c\u003c 'EOF'\n${authorizedKeys}\nEOF\n    sort -u -o /root/.ssh/authorized_keys /root/.ssh/authorized_keys\n    chmod 600 /root/.ssh/authorized_keys\n  `);\n\n  console.log(`[ssh] Injected ${keys.length} SSH keys for user ${userId}`);\n}\n```\n\nAlso add endpoint to inject keys into existing sandbox (for when user adds a new key after sandbox creation):\n\nPOST /api/sandboxes/:id/inject-ssh-keys\n- Auth: Stack Auth token required\n- Verifies user has access to sandbox\n- Injects user's current SSH keys\n- Returns: { injected: number }","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:40:54.293047-08:00","updated_at":"2025-12-09T03:28:06.632582-08:00","closed_at":"2025-12-09T03:28:06.632582-08:00","dependencies":[{"issue_id":"cmux-jsg.5","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:40:54.296527-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.5","depends_on_id":"cmux-jsg.1","type":"blocks","created_at":"2025-12-09T01:40:54.298698-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.5","depends_on_id":"cmux-jsg.2","type":"blocks","created_at":"2025-12-09T01:40:54.301103-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.5","depends_on_id":"cmux-jsg.12","type":"blocks","created_at":"2025-12-09T01:43:55.246476-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.6","title":"CLI authentication via Stack Auth","description":"Implement browser-based CLI authentication using Stack Auth's CLI auth flow.\n\nLocation: packages/sandbox/src/bin/cli.rs\n\nCommands to add:\n- cmux auth login    - Opens browser, polls for token, stores in keychain\n- cmux auth logout   - Clears stored credentials\n- cmux auth status   - Shows current auth state\n- cmux auth token    - Prints access token (for debugging)\n\nFlow (per Stack Auth CLI docs):\n1. POST to /api/v1/auth/cli with expires_in_millis\n   - Response: { polling_code, login_code }\n2. Open browser to https://cmux.sh/handler/cli-auth-confirm?login_code=xxx\n3. Poll /api/v1/auth/cli/poll with polling_code\n4. On success, receive refresh_token\n5. Store refresh_token in OS keychain\n\nKeychain storage:\n- macOS: Use security-framework crate (native Keychain)\n- Linux: Fallback to ~/.config/cmux/credentials.json with mode 600\n\nGetting access token from refresh token:\n- POST to /api/v1/auth/sessions/current/refresh with x-stack-refresh-token header\n- Returns { access_token }\n- Cache access token briefly, refresh when expired\n\nDependencies to add to Cargo.toml:\n- security-framework (macOS keychain)\n- keyring (cross-platform alternative)\n- open (open URLs in browser)\n- dialoguer (for interactive prompts)\n\nConfig values needed:\n- STACK_PROJECT_ID\n- STACK_PUBLISHABLE_CLIENT_KEY\n- APP_URL (https://cmux.sh)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:41:10.700264-08:00","updated_at":"2025-12-09T03:28:13.024553-08:00","closed_at":"2025-12-09T03:28:13.024553-08:00","dependencies":[{"issue_id":"cmux-jsg.6","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:41:10.702324-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.7","title":"CLI SSH key management commands","description":"Implement CLI commands for managing SSH keys.\n\nLocation: packages/sandbox/src/bin/cli.rs\n\nCommands:\n- cmux ssh-keys list              - List registered keys\n- cmux ssh-keys add [path]        - Add key (default: ~/.ssh/id_ed25519.pub)\n- cmux ssh-keys add --from-github - Import keys from connected GitHub account\n- cmux ssh-keys remove \u003cfingerprint\u003e - Remove a key\n\nImplementation for 'add' command:\n1. Get access token from keychain (requires auth)\n2. Default path: check ~/.ssh/id_ed25519.pub, id_rsa.pub, id_ecdsa.pub\n3. Read public key file\n4. Compute SHA256 fingerprint\n5. Prompt for key name (default: hostname)\n6. Call POST /api/user/ssh-keys with bearer token\n7. Display success message\n\nFingerprint computation:\n- Parse the public key\n- Base64 decode the key data\n- SHA256 hash\n- Format as SHA256:base64...\n\nExample UX:\n```\n$ cmux ssh-keys add\nFound SSH public key at ~/.ssh/id_ed25519.pub\nFingerprint: SHA256:abc123...\n\nKey name [MacBook-Pro]: My Laptop\n✓ SSH key registered successfully\n\n$ cmux ssh-keys list\nNAME         FINGERPRINT              SOURCE   CREATED\nMy Laptop    SHA256:abc123...         local    2 minutes ago\nWork Key     SHA256:def456...         github   1 day ago\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:41:24.581336-08:00","updated_at":"2025-12-09T03:28:26.295577-08:00","closed_at":"2025-12-09T03:28:26.295577-08:00","dependencies":[{"issue_id":"cmux-jsg.7","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:41:24.588391-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.7","depends_on_id":"cmux-jsg.3","type":"blocks","created_at":"2025-12-09T01:41:24.590415-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.7","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T01:41:24.599041-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.7","depends_on_id":"cmux-jsg.13","type":"blocks","created_at":"2025-12-09T01:43:55.307231-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.8","title":"CLI SSH connection command","description":"Implement CLI commands for SSH connections to sandboxes.\n\nLocation: packages/sandbox/src/bin/cli.rs\n\nCommands:\n- cmux ssh \u003csandbox-id\u003e                 - Connect to sandbox\n- cmux ssh \u003csandbox-id\u003e -- \u003ccommand\u003e    - Run command on sandbox\n- cmux ssh \u003csandbox-id\u003e -L 8080:localhost:8080  - With port forwarding\n- cmux _ssh-proxy \u003csandbox-id\u003e          - Internal ProxyCommand helper\n\nImplementation of 'cmux ssh':\n1. Get access token from keychain\n2. Call GET /api/sandboxes/{id}/ssh with bearer token\n3. Receive { morphInstanceId, host, port, user }\n4. Spawn SSH with appropriate args\n\nImplementation of 'cmux _ssh-proxy' (ProxyCommand):\n1. Get access token from keychain\n2. Call GET /api/sandboxes/{id}/ssh\n3. Open TCP connection to ssh.cloud.morph.so:22\n4. Bridge stdin/stdout to TCP socket\n5. SSH client talks through this bridge\n\nWhy ProxyCommand approach:\n- Makes VSCode/Zed/Cursor work automatically\n- User types 'ssh sandbox-xxx', ProxyCommand handles auth + routing\n- Hides all Morph branding from user\n\nExample:\n```\n$ cmux ssh abc123\nConnecting to sandbox abc123...\nroot@sandbox-abc123:~# \n\n$ cmux ssh abc123 -- ls /workspace\nREADME.md\npackage.json\nsrc/\n```\n\nHandle both:\n- sandbox-{uuid} format\n- task-run-{id} format (resolve to most recent sandbox)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:41:39.507483-08:00","updated_at":"2025-12-09T03:28:32.634559-08:00","closed_at":"2025-12-09T03:28:32.634559-08:00","dependencies":[{"issue_id":"cmux-jsg.8","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:41:39.510288-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.8","depends_on_id":"cmux-jsg.4","type":"blocks","created_at":"2025-12-09T01:41:39.512898-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.8","depends_on_id":"cmux-jsg.6","type":"blocks","created_at":"2025-12-09T01:41:39.515216-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.8","depends_on_id":"cmux-jsg.14","type":"blocks","created_at":"2025-12-09T01:43:55.376792-08:00","created_by":"daemon"}]}
{"id":"cmux-jsg.9","title":"CLI SSH config generation command","description":"Implement CLI command to generate SSH config for editors.\n\nLocation: packages/sandbox/src/bin/cli.rs\n\nCommands:\n- cmux ssh-config           - Print SSH config to stdout\n- cmux ssh-config --install - Append to ~/.ssh/config (with backup)\n\nGenerated config:\n```\n# cmux sandboxes - added by 'cmux ssh-config'\n# This enables: ssh sandbox-\u003cid\u003e, VSCode Remote SSH, etc.\nHost sandbox-*\n    User root\n    StrictHostKeyChecking no\n    UserKnownHostsFile /dev/null\n    LogLevel ERROR\n    ProxyCommand cmux _ssh-proxy $(echo %n | sed 's/sandbox-//')\n\n# For task runs: ssh task-run-\u003cid\u003e\nHost task-run-*\n    User root\n    StrictHostKeyChecking no\n    UserKnownHostsFile /dev/null\n    LogLevel ERROR\n    ProxyCommand cmux _ssh-proxy $(echo %n | sed 's/task-run-//')\n```\n\nInstall behavior:\n1. Check if already installed (look for '# cmux sandboxes' marker)\n2. If exists, offer to update or skip\n3. Backup existing ~/.ssh/config to ~/.ssh/config.backup\n4. Append config to ~/.ssh/config\n5. Print success message with usage examples\n\nExample UX:\n```\n$ cmux ssh-config --install\nBacked up existing config to ~/.ssh/config.backup\n✓ SSH config installed to ~/.ssh/config\n\nYou can now use:\n  ssh sandbox-\u003cid\u003e\n  ssh task-run-\u003cid\u003e\n  code --remote ssh-remote+sandbox-\u003cid\u003e /workspace\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T01:41:52.389323-08:00","updated_at":"2025-12-09T03:28:39.848977-08:00","closed_at":"2025-12-09T03:28:39.848977-08:00","dependencies":[{"issue_id":"cmux-jsg.9","depends_on_id":"cmux-jsg","type":"parent-child","created_at":"2025-12-09T01:41:52.390855-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.9","depends_on_id":"cmux-jsg.8","type":"blocks","created_at":"2025-12-09T01:41:52.393049-08:00","created_by":"daemon"},{"issue_id":"cmux-jsg.9","depends_on_id":"cmux-jsg.16","type":"blocks","created_at":"2025-12-09T01:43:55.442395-08:00","created_by":"daemon"}]}
{"id":"cmux-k3z","title":"Abstract screenshot collector CLI for git providers","description":"Update screenshot collector to work with GitLab MRs and Bitbucket PRs.\n\n## Current State\n- apps/worker/src/screenshotCollector/claudeScreenshotCollectorCli.ts\n- Uses `gh pr view` to get PR info\n- Parses only github.com URLs\n- Clones from github.com\n\n## gh CLI Commands Used\n```bash\ngh pr view ${prNumber} --repo ${owner}/${repo} --json baseRefName,headRefName,title,body\ngh pr view ${prNumber} --repo ${owner}/${repo} --json files --jq '.files[].path'\ngh pr view ${prNumber} --repo ${owner}/${repo} --json headRefName --jq '.headRefName'\n```\n\n## Provider CLI Equivalents\n| Action | GitHub | GitLab | Bitbucket |\n|--------|--------|--------|-----------|\n| View MR/PR | gh pr view | glab mr view | API call |\n| Get files | gh pr view --json files | glab mr view --json | API call |\n| Get branch | gh pr view --json headRefName | glab mr view -F json | API call |\n\n## Implementation Options\n\n### Option A: Abstract CLI wrapper\n```typescript\ninterface ProviderCli {\n  getPRInfo(repo: string, number: number): Promise\u003cPRInfo\u003e\n  getPRFiles(repo: string, number: number): Promise\u003cstring[]\u003e\n  getPRBranch(repo: string, number: number): Promise\u003cstring\u003e\n}\n```\n\n### Option B: Use API instead of CLI\n- More reliable and consistent across providers\n- Already have provider abstraction layer\n\n## Files to Modify\n- apps/worker/src/screenshotCollector/claudeScreenshotCollectorCli.ts\n- Should use provider abstraction instead of raw CLI calls","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:30:56.793333-08:00","updated_at":"2025-12-29T19:02:03.384007-08:00","closed_at":"2025-12-29T19:02:03.384007-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-k3z","depends_on_id":"cmux-7dc","type":"blocks","created_at":"2025-12-02T23:31:02.381494-08:00","created_by":"daemon"},{"issue_id":"cmux-k3z","depends_on_id":"cmux-c6k","type":"blocks","created_at":"2025-12-02T23:31:02.422859-08:00","created_by":"daemon"}]}
{"id":"cmux-lbq","title":"Add Daytona provider support","description":"Add Daytona as second VM provider. Thin wrapper if interface differs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-03T18:57:27.251578-08:00","updated_at":"2025-12-29T19:02:03.377701-08:00","closed_at":"2025-12-29T19:02:03.377701-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"]}
{"id":"cmux-llf","title":"Fix Uint8Array type error in SSH key fingerprint computation","description":"Build fails with type error in user-ssh-keys.route.ts:92\n\n```\nType error: Argument of type 'Uint8Array\u003cArrayBufferLike\u003e' is not assignable to parameter of type 'BufferSource'.\n```\n\nThe issue is that `crypto.subtle.digest` expects `ArrayBuffer` but `Uint8Array` has `ArrayBufferLike` which includes `SharedArrayBuffer`.\n\nFix: Cast or use `.buffer` property explicitly, e.g.:\n```typescript\nconst hashBuffer = await crypto.subtle.digest('SHA-256', binaryData.buffer.slice(binaryData.byteOffset, binaryData.byteOffset + binaryData.byteLength));\n```\n\nOr simpler:\n```typescript\nconst hashBuffer = await crypto.subtle.digest('SHA-256', new Uint8Array(binaryData) as Uint8Array\u003cArrayBuffer\u003e);\n```\n\nLocation: apps/www/lib/routes/user-ssh-keys.route.ts:92","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-09T03:56:56.423641-08:00","updated_at":"2025-12-10T01:05:50.541475-08:00","closed_at":"2025-12-10T01:05:50.541475-08:00"}
{"id":"cmux-lv3","title":"Create provider factory and registry","description":"Implement factory pattern for instantiating git providers.\n\n## Implementation\n\n### Provider Registry\n```typescript\n// packages/shared/src/git-providers/registry.ts\n\ntype ProviderName = 'github' | 'gitlab' | 'bitbucket'\n\nconst providers: Record\u003cProviderName, () =\u003e GitProvider\u003e = {\n  github: () =\u003e new GitHubProvider(config.github),\n  gitlab: () =\u003e new GitLabProvider(config.gitlab),\n  bitbucket: () =\u003e new BitbucketProvider(config.bitbucket),\n}\n\nexport function getProvider(name: ProviderName): GitProvider {\n  const factory = providers[name]\n  if (\\!factory) throw new Error(`Unknown provider: ${name}`)\n  return factory()\n}\n\nexport function getProviderForInstallation(installationId: string): Promise\u003cGitProvider\u003e {\n  // Look up provider from providerConnections table\n}\n```\n\n### Configuration\n```typescript\n// packages/shared/src/git-providers/config.ts\n\ninterface ProviderConfig {\n  github?: {\n    appId: string\n    privateKey: string\n    webhookSecret: string\n  }\n  gitlab?: {\n    appId: string\n    appSecret: string\n    webhookSecret: string\n    baseUrl?: string  // For self-hosted\n  }\n  bitbucket?: {\n    appKey: string\n    appSecret: string\n    webhookSecret: string\n  }\n}\n```\n\n## Usage Examples\n```typescript\n// In route handlers\nconst provider = getProvider(req.params.provider)\nconst prs = await provider.listPullRequests(repo)\n\n// In webhook handlers\nconst provider = getProviderForInstallation(installationId)\nawait provider.addReaction(repo, prNumber, 'eyes')\n```\n\n## Files to Create\n- packages/shared/src/git-providers/registry.ts\n- packages/shared/src/git-providers/config.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:56:59.411446-08:00","updated_at":"2025-12-09T01:53:22.1347-08:00","closed_at":"2025-12-03T00:55:25.71748-08:00","dependencies":[{"issue_id":"cmux-lv3","depends_on_id":"cmux-saz","type":"blocks","created_at":"2025-12-02T22:57:06.47341-08:00","created_by":"daemon"},{"issue_id":"cmux-lv3","depends_on_id":"cmux-ab7","type":"blocks","created_at":"2025-12-02T22:57:06.51816-08:00","created_by":"daemon"}]}
{"id":"cmux-nwf","title":"Build video player component with chapters","description":"Create React video player with YouTube-like chapter navigation, showing checkpoints as clickable markers on the timeline","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T18:13:41.646425-08:00","updated_at":"2025-12-29T18:41:20.571826-08:00","closed_at":"2025-12-29T18:41:20.571826-08:00","close_reason":"Already implemented in VideoPlayer.tsx - includes playback speed controls (0.5x-2x) and YouTube-like chapter navigation with checkpoint markers on timeline","labels":["austin"]}
{"id":"cmux-o5t","title":"Make links navigatable via command+click in sandbox terminal","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:29.18654-08:00","updated_at":"2025-12-29T18:41:31.126927-08:00","closed_at":"2025-12-29T18:41:31.126927-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-oad","title":"Auto-scroll to cursor when user is typing if not already in view","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:37.338372-08:00","updated_at":"2025-12-09T01:53:22.14477-08:00","closed_at":"2025-12-02T16:47:10.561283-08:00","labels":["sandbox"]}
{"id":"cmux-oxp","title":"Update database schema for multi-provider support","description":"Modify Convex schema to support multiple git providers.\n\n## Current GitHub-Specific Tables\n- providerConnections - Already has 'provider' field, good!\n- pullRequests - Has 'provider' field\n- githubWorkflowRuns - GitHub-specific (Actions)\n- githubCheckRuns - GitHub-specific (Checks API)\n- githubDeployments - GitHub-specific (Deployments API)\n- githubCommitStatuses - GitHub-specific (Status API)\n\n## Schema Changes Needed\n\n### 1. Rename/Generalize Tables\n```typescript\n// Option A: Keep GitHub-specific tables, add parallel tables\n// - gitlabPipelines (equivalent to githubWorkflowRuns)\n// - gitlabJobs (equivalent to githubCheckRuns)\n// - bitbucketPipelines\n\n// Option B: Create generic tables with provider field\n// - ciRuns (unified CI/CD runs)\n// - deployments (unified deployments)\n```\n\n### 2. providerConnections Updates\n- Already supports provider field\n- Need to add GitLab/Bitbucket specific fields\n- Consider: workspace_id (Bitbucket), group_id (GitLab)\n\n### 3. New Indexes\n- Add compound indexes on (provider, installationId)\n- Add indexes for provider-specific queries\n\n### 4. Migration Strategy\n- Keep existing tables working (backward compat)\n- Add new fields as optional initially\n- Gradual migration of queries\n\n## Files to Modify\n- packages/convex/convex/schema.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:56:25.820748-08:00","updated_at":"2025-12-09T01:53:22.1355-08:00","closed_at":"2025-12-03T01:15:59.205524-08:00","dependencies":[{"issue_id":"cmux-oxp","depends_on_id":"cmux-80t","type":"blocks","created_at":"2025-12-02T22:56:30.467005-08:00","created_by":"daemon"}]}
{"id":"cmux-p8w","title":"Implement session persistence and reattachment (tmux-like behavior)","description":"Currently PTY sessions are killed when WebSocket disconnects. Need to:\n1. Decouple PTY process lifecycle from client connections\n2. Create persistent session registry that survives disconnects\n3. Support reattaching to existing sessions with scrollback preserved\n4. Keep TUI apps (vim, git diff, less) alive when client disconnects","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T22:11:39.143236-08:00","updated_at":"2025-12-29T18:41:31.114037-08:00","closed_at":"2025-12-29T18:41:31.114037-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-qcr","title":"Fix Alt+B Open Browser - cmux browser doesn't accept --base-url flag","description":"Code spawns 'cmux browser $id --base-url $base_url' but the CLI only accepts the ID argument, not --base-url. Error: unexpected argument '--base-url' found","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:48.755945-08:00","updated_at":"2025-12-29T18:41:31.119527-08:00","closed_at":"2025-12-29T18:41:31.119527-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-qem","title":"Handle open commands inside sandboxes and propagate to host machine","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:27.700385-08:00","updated_at":"2025-12-09T01:53:22.146051-08:00","closed_at":"2025-12-02T15:39:03.311959-08:00","labels":["sandbox"]}
{"id":"cmux-rpn","title":"Implement better mouse scrolling behavior with momentum (like chat scroll area)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:20.420206-08:00","updated_at":"2025-12-29T18:41:31.130397-08:00","closed_at":"2025-12-29T18:41:31.130397-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-s0f","title":"Add cmux prune command to cleanup sandboxes from N days ago (default 2 days, configurable)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-05T01:27:23.748533-08:00","updated_at":"2025-12-09T01:53:22.123512-08:00","closed_at":"2025-12-05T01:51:16.424645-08:00"}
{"id":"cmux-s12","title":"Add CLI command to spawn Morph VMs","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T14:08:48.535538-08:00","updated_at":"2025-12-29T19:02:03.369354-08:00","closed_at":"2025-12-29T19:02:03.369354-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"]}
{"id":"cmux-saz","title":"Implement GitHub provider adapter","description":"Refactor existing GitHub code into the new provider abstraction.\n\n## Files to Modify\n- packages/convex/_shared/githubApp.ts → Extract to provider pattern\n- apps/www/lib/utils/github-app-token.ts → Use provider abstraction\n- apps/www/lib/github/*.ts → Migrate to provider\n\n## Implementation\n- Create packages/shared/src/git-providers/github/index.ts\n- Implement GitProvider interface using existing Octokit code\n- Keep backward compatibility during migration\n- Map GitHub-specific responses to normalized types\n\n## Considerations\n- GitHub App authentication flow\n- Installation tokens\n- GitHub-specific features (Actions, Checks, Deployments)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:55:15.125579-08:00","updated_at":"2025-12-09T01:53:22.138191-08:00","closed_at":"2025-12-03T00:55:27.755109-08:00","dependencies":[{"issue_id":"cmux-saz","depends_on_id":"cmux-t6p","type":"blocks","created_at":"2025-12-02T22:55:40.101323-08:00","created_by":"daemon"}]}
{"id":"cmux-sba","title":"Fix dmux vm create missing teamSlugOrId error","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-09T19:02:12.387267-08:00","updated_at":"2025-12-29T19:02:28.45605-08:00","closed_at":"2025-12-29T19:02:28.45605-08:00","close_reason":"Investigation complete: resolve_team handles all cases correctly.","labels":["austin"]}
{"id":"cmux-ssw","title":"Preinstall emacs and neovim in Docker container (vim/zsh already done)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:16.814211-08:00","updated_at":"2025-12-09T01:53:22.148826-08:00","closed_at":"2025-12-02T15:58:11.308243-08:00","labels":["sandbox"]}
{"id":"cmux-st6","title":"Optimize sandbox creation times with timing instrumentation","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-04T17:13:25.281625-08:00","updated_at":"2025-12-09T01:53:22.126403-08:00","closed_at":"2025-12-04T17:44:22.275869-08:00","labels":["sandbox"]}
{"id":"cmux-t33","title":"Fix Alt+E Open Editor - SSH URI uses sandbox_id not actual host","description":"Alt+E tries vscode-remote://ssh-remote+root@{sandbox_id}/workspace but sandbox_id is a UUID, not an SSH hostname. Need to use proper connection method - either container IP, port forwarding, or web-based editor.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:47.617841-08:00","updated_at":"2025-12-29T18:41:31.121862-08:00","closed_at":"2025-12-29T18:41:31.121862-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"],"dependencies":[{"issue_id":"cmux-t33","depends_on_id":"cmux-ic9","type":"blocks","created_at":"2025-12-02T21:10:48.728812-08:00","created_by":"daemon"}]}
{"id":"cmux-t6p","title":"Create core GitProvider interface","description":"Implement the core TypeScript interfaces that all git providers must implement.\n\n## Files to Create/Modify\n- packages/shared/src/git-providers/types.ts - Core interfaces\n- packages/shared/src/git-providers/index.ts - Exports\n\n## Interfaces Needed\n```typescript\ninterface GitProvider {\n  name: 'github' | 'gitlab' | 'bitbucket'\n  // Authentication\n  createAppAuth(): Promise\u003cAuthResult\u003e\n  getInstallationToken(installationId: string): Promise\u003cstring\u003e\n  // Repositories\n  listRepositories(installationId: string): AsyncIterable\u003cRepository\u003e\n  getRepository(owner: string, repo: string): Promise\u003cRepository\u003e\n  // Pull Requests / Merge Requests\n  listPullRequests(repo: string, options?: PRListOptions): Promise\u003cPullRequest[]\u003e\n  getPullRequest(repo: string, number: number): Promise\u003cPullRequest\u003e\n  createPullRequest(repo: string, params: CreatePRParams): Promise\u003cPullRequest\u003e\n  getPullRequestPatch(repo: string, number: number): Promise\u003cstring\u003e\n  getPullRequestFiles(repo: string, number: number): Promise\u003cPRFile[]\u003e\n  // Comments\n  createPRComment(repo: string, number: number, body: string): Promise\u003cComment\u003e\n  updatePRComment(repo: string, commentId: number, body: string): Promise\u003cComment\u003e\n  // Reactions\n  addReaction(repo: string, issueNumber: number, reaction: string): Promise\u003cvoid\u003e\n  // File Contents\n  getFileContent(repo: string, path: string, ref?: string): Promise\u003cstring\u003e\n}\n```\n\n## Normalized Types\n- Repository, PullRequest, Branch, User, Comment, etc.\n- Map provider-specific fields to common fields","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:54:57.750531-08:00","updated_at":"2025-12-09T01:53:22.138578-08:00","closed_at":"2025-12-03T00:51:00.446908-08:00","dependencies":[{"issue_id":"cmux-t6p","depends_on_id":"cmux-80t","type":"blocks","created_at":"2025-12-02T22:55:05.415868-08:00","created_by":"daemon"}]}
{"id":"cmux-tcf","title":"Abstract CI/CD status tracking for git providers","description":"Abstract CI/CD pipeline status tracking across providers.\n\n## Current State (GitHub-specific tables)\n- githubWorkflowRuns - GitHub Actions workflow runs\n- githubCheckRuns - Third-party checks (Vercel, etc.)\n- githubDeployments - Deployment events\n- githubCommitStatuses - Legacy commit status API\n\n## Provider CI/CD Systems\n| Feature | GitHub | GitLab | Bitbucket |\n|---------|--------|--------|-----------|\n| CI/CD | Actions | Pipelines | Pipelines |\n| Checks | Check Runs API | Pipeline jobs | Build status |\n| Deployments | Environments | Environments | Deployments |\n| Status API | Commit status | Commit status | Build status |\n\n## Options\n\n### Option A: Unified Tables\n```typescript\n// ciRuns - unified CI/CD runs\n{\n  provider: 'github' | 'gitlab' | 'bitbucket'\n  runId: string  // provider-specific ID\n  pipelineId?: string\n  name: string\n  status: 'queued' | 'in_progress' | 'completed'\n  conclusion?: 'success' | 'failure' | 'cancelled' | ...\n  // ...normalized fields\n}\n```\n\n### Option B: Provider-Specific Tables (current approach extended)\n- Keep githubWorkflowRuns\n- Add gitlabPipelines, gitlabJobs\n- Add bitbucketPipelines\n\n## Webhook Events\n| Event | GitHub | GitLab | Bitbucket |\n|-------|--------|--------|-----------|\n| CI start | workflow_run.queued | pipeline.pending | repo:commit_status_created |\n| CI complete | workflow_run.completed | pipeline.success/failed | repo:commit_status_updated |\n| Check | check_run | pipeline job | build status |\n\n## Considerations\n- Different granularity (workflow vs job vs step)\n- Not all fields map cleanly\n- May want to query 'all CI status for this commit' across providers","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:13:20.554037-08:00","updated_at":"2025-12-29T19:02:03.391872-08:00","closed_at":"2025-12-29T19:02:03.391872-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-tcf","depends_on_id":"cmux-cyr","type":"blocks","created_at":"2025-12-02T23:13:27.662206-08:00","created_by":"daemon"},{"issue_id":"cmux-tcf","depends_on_id":"cmux-oxp","type":"blocks","created_at":"2025-12-02T23:13:27.713223-08:00","created_by":"daemon"}]}
{"id":"cmux-u5n","title":"Abstract authentication layer for git providers","description":"Create unified authentication handling for all git providers.\n\n## Current State (GitHub-only)\n- GitHub App with JWT + installation tokens\n- OAuth tokens via Stack Auth\n- Environment: CMUX_GITHUB_APP_ID, CMUX_GITHUB_APP_PRIVATE_KEY\n\n## Required Abstraction\n\n### Environment Variables Pattern\n```\n# GitHub\nCMUX_GITHUB_APP_ID\nCMUX_GITHUB_APP_PRIVATE_KEY\nGITHUB_APP_WEBHOOK_SECRET\n\n# GitLab\nCMUX_GITLAB_APP_ID\nCMUX_GITLAB_APP_SECRET\nGITLAB_WEBHOOK_SECRET\n\n# Bitbucket\nCMUX_BITBUCKET_APP_KEY\nCMUX_BITBUCKET_APP_SECRET\nBITBUCKET_WEBHOOK_SECRET\n```\n\n### Auth Interface\n```typescript\ninterface ProviderAuth {\n  getAppToken(): Promise\u003cstring\u003e\n  getInstallationToken(installationId: string, permissions?: Permissions): Promise\u003cTokenResult\u003e\n  validateWebhookSignature(payload: string, signature: string): boolean\n  getOAuthUrl(state: string, scopes: string[]): string\n  exchangeOAuthCode(code: string): Promise\u003cOAuthTokens\u003e\n}\n```\n\n## Files to Modify\n- packages/convex/_shared/convex-env.ts - Add new env vars\n- packages/convex/_shared/githubApp.ts → refactor to provider pattern\n- apps/www/lib/utils/github-app-token.ts → abstract","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T22:55:51.909751-08:00","updated_at":"2025-12-29T19:02:03.408244-08:00","closed_at":"2025-12-29T19:02:03.408244-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-u5n","depends_on_id":"cmux-t6p","type":"blocks","created_at":"2025-12-02T22:55:56.379716-08:00","created_by":"daemon"}]}
{"id":"cmux-ubb","title":"Add command palette actions for opening sandbox browser (alt+b) and editor (alt+e)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:21.761978-08:00","updated_at":"2025-12-09T01:53:22.14722-08:00","closed_at":"2025-12-02T16:44:05.75665-08:00","labels":["sandbox"]}
{"id":"cmux-v2g","title":"Alternate screen buffer content persists after app exit (git diff/less)","description":"After running git diff and it exits, the previous content stays on screen instead of being restored. This suggests alternate screen buffer (DECSET 1049) restore isn't working correctly.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:49.997267-08:00","updated_at":"2025-12-29T18:41:31.117908-08:00","closed_at":"2025-12-29T18:41:31.117908-08:00","close_reason":"Bulk cleanup - removing non-austin issues","labels":["austin","sandbox"]}
{"id":"cmux-vjo","title":"Remove ws-ssh-proxy from snapshot","description":"Remove: task_install_ws_ssh_proxy, ws-ssh-proxy systemd service, port 22221 from exposed ports. Delete scripts/ws-ssh-proxy/ directory.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:18:52.265564-08:00","updated_at":"2025-12-11T18:35:08.931356-08:00","closed_at":"2025-12-11T18:35:08.931356-08:00","dependencies":[{"issue_id":"cmux-vjo","depends_on_id":"cmux-i0z","type":"blocks","created_at":"2025-12-11T18:20:26.890648-08:00","created_by":"lawrencechen"}]}
{"id":"cmux-wf5","title":"Command palette option to copy entire scrollback to clipboard","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T21:09:59.95193-08:00","updated_at":"2025-12-09T01:53:22.14212-08:00","closed_at":"2025-12-03T19:32:55.369802-08:00","labels":["sandbox"]}
{"id":"cmux-xha","title":"Abstract file content retrieval for git providers","description":"Abstract file content retrieval across providers for code review and diff viewing.\n\n## Current State\n- apps/www/lib/routes/github.prs.file-contents.route.ts - Get file at specific ref\n- apps/www/lib/routes/github.prs.file-contents-batch.route.ts - Batch file retrieval\n- apps/www/lib/routes/github.prs.patch.route.ts - Get PR patch/diff\n- apps/www/lib/routes/github.prs.files.route.ts - List changed files\n\n## Operations to Abstract\n```typescript\ninterface FileContentsProvider {\n  // Single file\n  getFileContent(repo: string, path: string, ref?: string): Promise\u003cFileContent\u003e\n  \n  // Batch files\n  getFileContentsBatch(repo: string, files: FileRequest[]): Promise\u003cFileContent[]\u003e\n  \n  // PR-specific\n  getPRPatch(repo: string, prNumber: number): Promise\u003cstring\u003e\n  getPRChangedFiles(repo: string, prNumber: number): Promise\u003cChangedFile[]\u003e\n  \n  // Compare\n  getCompare(repo: string, base: string, head: string): Promise\u003cCompareResult\u003e\n}\n\ninterface FileContent {\n  path: string\n  content: string\n  encoding: 'utf-8' | 'base64'\n  sha?: string\n  size?: number\n}\n\ninterface ChangedFile {\n  filename: string\n  status: 'added' | 'removed' | 'modified' | 'renamed'\n  additions: number\n  deletions: number\n  patch?: string\n}\n```\n\n## Provider Differences\n| Feature | GitHub | GitLab | Bitbucket |\n|---------|--------|--------|-----------|\n| File content | contents API | repository files API | src endpoint |\n| Batch files | GraphQL | GraphQL | Multiple requests |\n| PR diff | pulls.get (diff media type) | MR changes | diffstat endpoint |\n| Compare | repos.compareCommits | compare | diff endpoint |\n\n## Files to Modify\n- apps/www/lib/routes/github.prs.file-contents*.route.ts\n- apps/www/lib/routes/github.prs.patch.route.ts\n- apps/www/lib/routes/github.prs.files.route.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T23:13:41.487378-08:00","updated_at":"2025-12-29T19:02:03.390379-08:00","closed_at":"2025-12-29T19:02:03.390379-08:00","close_reason":"Out of scope - roadmap items, not requested work","labels":["austin"],"dependencies":[{"issue_id":"cmux-xha","depends_on_id":"cmux-lv3","type":"blocks","created_at":"2025-12-02T23:13:46.205114-08:00","created_by":"daemon"}]}
{"id":"cmux-xn9","title":"Create VNC video recorder service","description":"Create a service that captures VNC stream as WebM video using MediaRecorder API or server-side ffmpeg","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T18:13:36.763665-08:00","updated_at":"2025-12-29T18:54:09.903239-08:00","closed_at":"2025-12-29T18:54:09.903239-08:00","close_reason":"Wired useVncRecorder to VNC component: added getCanvas() to VncViewerHandle, created useVncRecordingSession hook with Convex integration, added client mutations for browser-side recording, and integrated recording controls in browser route","labels":["austin"]}
{"id":"cmux-xrq","title":"Add keyboard shortcut to delete sandbox (alt+shift+w is currently CloseTab)","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-02T15:28:25.430463-08:00","updated_at":"2025-12-09T01:53:22.146635-08:00","closed_at":"2025-12-02T16:19:33.257153-08:00","labels":["sandbox"]}
{"id":"cmux-xyz","title":"Add better logging for sandbox lifecycle (creation, cleanup, FD usage)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-02T21:57:23.496291-08:00","updated_at":"2025-12-09T01:53:22.141227-08:00","closed_at":"2025-12-02T21:57:37.966722-08:00","labels":["sandbox"]}
{"id":"cmux-yfo","title":"Video Recording Feature for Preview Runs","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-29T18:13:10.962837-08:00","updated_at":"2025-12-29T18:56:04.173-08:00","closed_at":"2025-12-29T18:56:04.173-08:00","close_reason":"Video recording feature implemented: VNC canvas recording with useVncRecorder hook, Convex storage integration via useVncRecordingSession, VideoPlayer with chapters and speed controls, RunVideoGallery for gallery display, auto-checkpoint detection, and full integration in browser route","labels":["austin"]}
